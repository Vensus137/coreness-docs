import{_ as i,o as a,c as t,af as e}from"./chunks/framework.DZTH9Z-c.js";const c=JSON.parse('{"title":"Placeholders","description":"Placeholder syntax, modifiers, and data access in Coreness scenarios.","frontmatter":{"title":"Placeholders","description":"Placeholder syntax, modifiers, and data access in Coreness scenarios.","keywords":"placeholders, modifiers, coreness scenarios, dynamic values","head":[["meta",{"property":"og:title","content":"Placeholders | Coreness"}],["meta",{"property":"og:description","content":"Placeholder syntax, modifiers, and data access in Coreness scenarios."}],["meta",{"property":"og:image","content":"https://docs.coreness.tech/logo-dark.png"}],["meta",{"property":"og:url","content":"https://docs.coreness.tech/en/reference/PLACEHOLDERS"}],["link",{"rel":"canonical","href":"https://docs.coreness.tech/en/reference/PLACEHOLDERS"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"TechArticle\\",\\"headline\\":\\"Placeholders\\",\\"description\\":\\"Placeholder syntax, modifiers, and data access in Coreness scenarios.\\",\\"url\\":\\"https://docs.coreness.tech/en/reference/PLACEHOLDERS\\"}"]]},"headers":[],"relativePath":"en/reference/PLACEHOLDERS.md","filePath":"en/reference/PLACEHOLDERS.md"}'),n={name:"en/reference/PLACEHOLDERS.md"};function l(d,s,p,h,o,r){return a(),t("div",null,[...s[0]||(s[0]=[e(`<h1 id="placeholders" tabindex="-1">Placeholders <a class="header-anchor" href="#placeholders" aria-label="Permalink to &quot;Placeholders&quot;">‚Äã</a></h1><p><strong>Purpose:</strong> Dynamic value substitution in scenario action parameters.</p><h2 id="mechanics" tabindex="-1">Mechanics: <a class="header-anchor" href="#mechanics" aria-label="Permalink to &quot;Mechanics:&quot;">‚Äã</a></h2><p><strong>All attributes in <code>params</code> automatically processed by placeholders</strong> before action execution. This means:</p><ul><li><strong>All values in <code>params</code></strong> ‚Äî strings, numbers, arrays, objects ‚Äî go through placeholder processing</li><li><strong>All nesting levels</strong> ‚Äî placeholders work at any level of <code>params</code> structure (in strings, array elements, object values)</li><li><strong>Automatic processing</strong> ‚Äî happens for each scenario step before action execution</li><li><strong>Data source</strong> ‚Äî system uses accumulated event data and previous action results as value source for substitution</li></ul><h2 id="placeholder-syntax" tabindex="-1">Placeholder Syntax: <a class="header-anchor" href="#placeholder-syntax" aria-label="Permalink to &quot;Placeholder Syntax:&quot;">‚Äã</a></h2><p><strong>Simple replacement:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello, {username}!&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  chat_id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{user_id}&quot;</span></span></code></pre></div><p><strong>With modifiers:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello, {username|fallback:Guest}!&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  price</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{amount|*0.9|format:currency}&quot;</span></span></code></pre></div><p><strong>Literal values in quotes:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{&#39;hello&#39;|upper}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                      # HELLO (without passing through dictionary)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  duration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{&#39;1d 2w&#39;|seconds}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # 1296000 (literal time)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  calculation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{&#39;100&#39;|+50}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                   # 150 (literal arithmetic)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  date_shift</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{&#39;2024-12-25&#39;|shift:+1 day}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 2024-12-26 (literal date)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Double quotes for strings with single quotes</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{&quot;it&#39;s working&quot;}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                     # it&#39;s working</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Escaped quotes</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{&#39;it\\&#39;s working&#39;}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    # it&#39;s working</span></span></code></pre></div><p><strong>Nested placeholders:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Answer: {status|equals:{expected}|value:OK|fallback:BAD}&quot;</span></span></code></pre></div><h2 id="‚ö†Ô∏è-important-yaml-quotes-for-placeholders-with-regex" tabindex="-1">‚ö†Ô∏è Important: YAML Quotes for Placeholders with regex <a class="header-anchor" href="#‚ö†Ô∏è-important-yaml-quotes-for-placeholders-with-regex" aria-label="Permalink to &quot;‚ö†Ô∏è Important: YAML Quotes for Placeholders with regex&quot;">‚Äã</a></h2><p><strong>Problem:</strong> YAML processes escape sequences differently in single and double quotes, which is critical for regex patterns with backslashes.</p><p><strong>Solution:</strong> Use <strong>double quotes</strong> for regex patterns with backslashes (<code>\\s</code>, <code>\\d</code>, <code>\\w</code>, etc.).</p><p><strong>Examples:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ‚ùå ERROR - in single quotes \\\\s doesn&#39;t escape correctly</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{event_text|regex:^([^\\\\s]+)|lower}&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # \\\\s becomes \\s (backslash + s), not space!</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ‚úÖ CORRECT - double quotes correctly escape backslashes</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{event_text|regex:^([^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s]+)|lower}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # \\\\s becomes \\s (space in regex)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ‚úÖ CORRECT - for regex without backslashes can use single quotes</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  tenant_id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{user_state|regex:tenant_(\\d+)}&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Works, as \\d doesn&#39;t require double escaping</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ‚úÖ CORRECT - for simple regex with one backslash also use double quotes</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{event_text|regex:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s+([^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s]+)$|lower}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # \\\\s for space, \\\\s for space</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ‚úÖ REGULAR PLACEHOLDERS - no difference</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello, {username}!&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # Works</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello, {username}!&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Also works</span></span></code></pre></div><p><strong>When to use double quotes:</strong></p><ul><li><strong>Regex patterns with backslashes</strong> ‚Äî <code>{field|regex:pattern}</code> where pattern contains <code>\\s</code>, <code>\\d</code>, <code>\\w</code>, <code>\\n</code>, <code>\\t</code>, etc.</li><li><strong>Important:</strong> In double quotes need to use double escaping: <code>\\\\s</code> for space, <code>\\\\d</code> for digit</li><li><strong>Example:</strong> <code>&quot;{event_text|regex:^([^\\\\s]+)|lower}&quot;</code> ‚Äî <code>\\\\s</code> becomes <code>\\s</code> (space in regex)</li></ul><p><strong>When can use single quotes:</strong></p><ul><li><strong>Regex patterns without backslashes</strong> ‚Äî simple patterns without <code>\\s</code>, <code>\\d</code>, <code>\\w</code>, etc.</li><li><strong>Regular placeholders</strong> ‚Äî <code>{username}</code>, <code>{user_id}</code></li><li><strong>Simple modifiers</strong> ‚Äî <code>{name|upper}</code>, <code>{price|format:currency}</code></li><li><strong>Text values</strong> ‚Äî without special characters</li></ul><p><strong>Rule:</strong> If regex pattern has backslashes (<code>\\s</code>, <code>\\d</code>, <code>\\w</code>, etc.) ‚Äî <strong>always use double quotes</strong> with double escaping (<code>\\\\s</code>, <code>\\\\d</code>, <code>\\\\w</code>).</p><p><strong>Access to nested data:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Dot notation for objects</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;User: {user.profile.name|fallback:Unknown}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Message: {message.text}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Indexes for arrays</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;First file: {attachment[0].file_id}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Last user: {users[-1].name}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Combined access</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Event: {event.attachment[0].type}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Data: {response.data.items[0].value}&quot;</span></span></code></pre></div><h2 id="available-data" tabindex="-1">Available Data: <a class="header-anchor" href="#available-data" aria-label="Permalink to &quot;Available Data:&quot;">‚Äã</a></h2><p><strong>All event and previous action data available for use in placeholders:</strong></p><p><strong>Event data:</strong></p><ul><li><strong><code>user_id</code></strong> ‚Äî user ID</li><li><strong><code>username</code></strong> ‚Äî username</li><li><strong><code>chat_id</code></strong> ‚Äî chat ID</li><li><strong><code>event_text</code></strong> ‚Äî message text</li><li><strong><code>callback_data</code></strong> ‚Äî callback button data</li><li><strong><code>event_date</code></strong> ‚Äî event time</li><li><strong><code>tenant_id</code></strong> ‚Äî tenant ID</li><li><strong><code>message_id</code></strong> ‚Äî message ID</li><li><strong><code>reply_to_message_id</code></strong> ‚Äî ID of message being replied to</li><li><strong><code>forward_from</code></strong> ‚Äî forwarding data</li><li><strong>And any other fields</strong> ‚Äî depending on event type</li></ul><p><strong>Tenant configuration:</strong></p><ul><li><strong><code>_config</code></strong> ‚Äî dictionary with tenant configuration (attributes from <code>config.yaml</code>) <ul><li><strong><code>_config.ai_token</code></strong> ‚Äî AI API key for tenant (if set)</li><li><strong>Other attributes</strong> ‚Äî depending on tenant configuration</li><li>Automatically available in all tenant scenarios</li></ul></li></ul><p><strong>Previous action data:</strong></p><ul><li><strong><code>last_message_id</code></strong> ‚Äî last sent message ID</li><li><strong><code>response_data</code></strong> ‚Äî any data returned by previous actions</li><li><strong>Other fields</strong> ‚Äî depending on actions in scenario</li></ul><h2 id="accessing-nested-elements" tabindex="-1">Accessing Nested Elements: <a class="header-anchor" href="#accessing-nested-elements" aria-label="Permalink to &quot;Accessing Nested Elements:&quot;">‚Äã</a></h2><blockquote><p><strong>Universal data access!</strong> Support for dot notation for objects and indexes for arrays.</p></blockquote><table><thead><tr><th>Syntax</th><th>Description</th><th>Example</th><th>Result</th></tr></thead><tbody><tr><td colspan="4"><strong>Objects</strong></td></tr><tr><td><code>object.field</code></td><td>Access object field</td><td><code>{message.text}</code></td><td><code>Hello world</code></td></tr><tr><td><code>object.field.subfield</code></td><td>Nested fields</td><td><code>{user.profile.name}</code></td><td><code>John Doe</code></td></tr><tr><td colspan="4"><strong>Arrays</strong></td></tr><tr><td><code>array[index]</code></td><td>Access array element</td><td><code>{attachment[0].file_id}</code></td><td><code>file_1</code> (first file)</td></tr><tr><td><code>array[-index]</code></td><td>Negative index</td><td><code>{attachment[-1].file_id}</code></td><td><code>file_3</code> (last file)</td></tr><tr><td><code>array[index].field</code></td><td>Array element field</td><td><code>{users[1].name}</code></td><td><code>Bob</code> (second user name)</td></tr><tr><td><code>array[index][index]</code></td><td>Nested arrays</td><td><code>{matrix[0][1]}</code></td><td><code>2</code> (matrix element)</td></tr><tr><td colspan="4"><strong>Combined</strong></td></tr><tr><td><code>object.array[index].field</code></td><td>Mixed access</td><td><code>{event.attachment[0].file_id}</code></td><td><code>file_1</code></td></tr></tbody></table><p><strong>Usage Examples:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Objects</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Message: {message.text}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;User: {user.profile.name|fallback:Unknown}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Arrays</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;First file: {attachment[0].file_id}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Last user: {users[-1].name|upper}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;File: {attachment[0].file_id}, size: {attachment[0].size}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Combined access</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Event: {event.attachment[0].type}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Data: {response.data.items[0].value}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Tenant configuration</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Token: {_config.ai_token|fallback:Not set}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Safe access</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{attachment[10].file_id|fallback:File not found}&quot;</span></span></code></pre></div><h2 id="getting-file-information" tabindex="-1">Getting File Information <a class="header-anchor" href="#getting-file-information" aria-label="Permalink to &quot;Getting File Information&quot;">‚Äã</a></h2><p><strong>Practical example: Getting file_id and type for forwarding files</strong></p><p>Create scenario that shows file_id and type of all event attachments:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">file_info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Getting file_id and type of attachments for subsequent forwarding&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  trigger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">event_type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;message&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      event_text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/file&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;send_message&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          üìé File information:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          file_id: &lt;code&gt;{event_attachment[0].file_id|fallback:{reply_attachment[0].file_id|fallback:File not found}}&lt;/code&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          type: &lt;code&gt;{event_attachment[0].type|fallback:{reply_attachment[0].type|fallback:Type not found}}&lt;/code&gt;</span></span></code></pre></div><p><strong>Error handling:</strong></p><ul><li>When accessing non-existent field/index returns <code>None</code></li><li>Can use <code>fallback</code> modifier for default value</li><li>Negative indexes work like in Python: <code>-1</code> = last element</li><li>Unlimited nesting depth supported</li></ul><h2 id="modifiers" tabindex="-1">Modifiers: <a class="header-anchor" href="#modifiers" aria-label="Permalink to &quot;Modifiers:&quot;">‚Äã</a></h2><table><thead><tr><th>Modifier</th><th>Description</th><th>Example</th><th>Result</th></tr></thead><tbody><tr><td colspan="4"><strong>Arithmetic Operations</strong></td></tr><tr><td><code>+value</code></td><td>Addition</td><td><code>{price|+100}</code></td><td><code>1500</code> (if price=1400)</td></tr><tr><td><code>-value</code></td><td>Subtraction</td><td><code>{price|-50}</code></td><td><code>1350</code> (if price=1400)</td></tr><tr><td><code>*value</code></td><td>Multiplication</td><td><code>{price|*0.9}</code></td><td><code>1260</code> (if price=1400)</td></tr><tr><td><code>/value</code></td><td>Division</td><td><code>{seconds|/3600}</code></td><td><code>2.5</code> (if seconds=9000)</td></tr><tr><td><code>%value</code></td><td>Modulo</td><td><code>{number|%7}</code></td><td><code>3</code> (if number=10)</td></tr><tr><td colspan="4"><strong>Case</strong></td></tr><tr><td><code>upper</code></td><td>Uppercase</td><td><code>{name|upper}</code></td><td><code>JOHN</code> (if name=&quot;John&quot;)</td></tr><tr><td><code>lower</code></td><td>Lowercase</td><td><code>{name|lower}</code></td><td><code>john</code> (if name=&quot;John&quot;)</td></tr><tr><td><code>title</code></td><td>Title case each word</td><td><code>{name|title}</code></td><td><code>John Doe</code> (if name=&quot;john doe&quot;)</td></tr><tr><td><code>capitalize</code></td><td>First letter uppercase</td><td><code>{name|capitalize}</code></td><td><code>John</code> (if name=&quot;john&quot;)</td></tr><tr><td><code>case:type</code></td><td>Case conversion</td><td><code>{name|case:upper}</code></td><td><code>JOHN</code> (if name=&quot;John&quot;)</td></tr><tr><td colspan="4"><strong>Lists</strong></td></tr><tr><td><code>tags</code></td><td>Convert to tags</td><td><code>{users|tags}</code></td><td><code>@user1 @user2</code></td></tr><tr><td><code>list</code></td><td>Bulleted list</td><td><code>{items|list}</code></td><td><code>‚Ä¢ item1\\n‚Ä¢ item2</code></td></tr><tr><td><code>comma</code></td><td>Comma separated</td><td><code>{items|comma}</code></td><td><code>item1, item2</code></td></tr><tr><td><code>expand</code></td><td>Expand array of arrays one level (in arrays only)</td><td><code>{keyboard|expand}</code></td><td><code>[[a, b], [c]]</code> ‚Üí <code>[a, b], [c]</code> (in array)</td></tr><tr><td><code>keys</code></td><td>Extract keys from object (dict) to array</td><td><code>{storage_values|keys}</code></td><td><code>[&quot;group1&quot;, &quot;group2&quot;]</code> (if storage_values={&quot;group1&quot;: {...}, &quot;group2&quot;: {...}})</td></tr><tr><td colspan="4"><strong>Transformations</strong></td></tr><tr><td><code>code</code></td><td>Wrap value in code block</td><td><code>{field|code}</code></td><td><code>&lt;code&gt;value&lt;/code&gt;</code></td></tr><tr><td colspan="4"><strong>String Formatting</strong></td></tr><tr><td><code>truncate:length</code></td><td>Truncate text</td><td><code>{text|truncate:50}</code></td><td><code>Very long text...</code></td></tr><tr><td colspan="4"><strong>Date &amp; Time Operations</strong></td></tr><tr><td><code>shift:¬±interval</code></td><td>Shift date by interval (PostgreSQL style: +1 day, -2 hours, +1 year 2 months). Supports all date formats including ISO with timezone, correct month/year handling</td><td><code>{created|shift:+1 day}</code></td><td><code>2024-12-26</code> (if created=&quot;2024-12-25&quot;)</td></tr><tr><td><code>seconds</code></td><td>Convert time strings to seconds (supports format: Xw Yd Zh Km Ms)</td><td><code>{duration|seconds}</code></td><td><code>9000</code> (if duration=&quot;2h 30m&quot;)</td></tr><tr><td><code>to_date</code></td><td>Round date to day start (00:00:00), returns ISO format</td><td><code>{created|to_date}</code></td><td><code>2024-12-25 00:00:00</code></td></tr><tr><td><code>to_hour</code></td><td>Round date to hour start (minutes and seconds = 0), returns ISO format</td><td><code>{created|to_hour}</code></td><td><code>2024-12-25 15:00:00</code> (if created=&quot;2024-12-25 15:30:45&quot;)</td></tr><tr><td><code>to_minute</code></td><td>Round date to minute start (seconds = 0), returns ISO format</td><td><code>{created|to_minute}</code></td><td><code>2024-12-25 15:30:00</code> (if created=&quot;2024-12-25 15:30:45&quot;)</td></tr><tr><td><code>to_second</code></td><td>Round date to second start (microseconds = 0), returns ISO format</td><td><code>{created|to_second}</code></td><td><code>2024-12-25 15:30:45</code></td></tr><tr><td><code>to_week</code></td><td>Round date to week start (Monday 00:00:00), returns ISO format</td><td><code>{created|to_week}</code></td><td><code>2024-12-23 00:00:00</code> (if created=&quot;2024-12-25 15:30:45&quot;)</td></tr><tr><td><code>to_month</code></td><td>Round date to month start (1st day, 00:00:00), returns ISO format</td><td><code>{created|to_month}</code></td><td><code>2024-12-01 00:00:00</code> (if created=&quot;2024-12-25 15:30:45&quot;)</td></tr><tr><td><code>to_year</code></td><td>Round date to year start (January 1st, 00:00:00), returns ISO format</td><td><code>{created|to_year}</code></td><td><code>2024-01-01 00:00:00</code> (if created=&quot;2024-12-25 15:30:45&quot;)</td></tr><tr><td colspan="4"><strong>Date &amp; Time Formatting</strong></td></tr><tr><td><code>format:timestamp</code></td><td>Convert to Unix timestamp</td><td><code>{date|format:timestamp}</code></td><td><code>1703512200</code></td></tr><tr><td><code>format:date</code></td><td>Date format (dd.mm.yyyy)</td><td><code>{timestamp|format:date}</code></td><td><code>25.12.2024</code></td></tr><tr><td><code>format:time</code></td><td>Time format (HH:MM)</td><td><code>{timestamp|format:time}</code></td><td><code>14:30</code></td></tr><tr><td><code>format:time_full</code></td><td>Time format with seconds (HH:MM:SS)</td><td><code>{timestamp|format:time_full}</code></td><td><code>14:30:45</code></td></tr><tr><td><code>format:datetime</code></td><td>Full format (dd.mm.yyyy HH:MM)</td><td><code>{timestamp|format:datetime}</code></td><td><code>25.12.2024 14:30</code></td></tr><tr><td><code>format:datetime_full</code></td><td>Full format with seconds (dd.mm.yyyy HH:MM:SS)</td><td><code>{timestamp|format:datetime_full}</code></td><td><code>25.12.2024 14:30:45</code></td></tr><tr><td><code>format:pg_date</code></td><td>PostgreSQL date format (YYYY-MM-DD)</td><td><code>{timestamp|format:pg_date}</code></td><td><code>2024-12-25</code></td></tr><tr><td><code>format:pg_datetime</code></td><td>PostgreSQL date-time format (YYYY-MM-DD HH:MM:SS)</td><td><code>{timestamp|format:pg_datetime}</code></td><td><code>2024-12-25 14:30:45</code></td></tr><tr><td colspan="4"><strong>Number Formatting</strong></td></tr><tr><td><code>format:currency</code></td><td>Currency formatting</td><td><code>{amount|format:currency}</code></td><td><code>1000.00 ‚ÇΩ</code></td></tr><tr><td><code>format:percent</code></td><td>Percentage formatting</td><td><code>{value|format:percent}</code></td><td><code>25.5%</code></td></tr><tr><td><code>format:number</code></td><td>Number formatting</td><td><code>{value|format:number}</code></td><td><code>1234.56</code></td></tr><tr><td colspan="4"><strong>Conditional</strong></td></tr><tr><td><code>equals:value</code></td><td>Equality check (string comparison)</td><td><code>{status|equals:active}</code></td><td><code>true</code> or <code>false</code></td></tr><tr><td><code>in_list:items</code></td><td>Check inclusion in list</td><td><code>{role|in_list:admin,moderator}</code></td><td><code>true</code> or <code>false</code></td></tr><tr><td><code>true</code></td><td>Truth check (recommended for boolean)</td><td><code>{is_active|true}</code></td><td><code>true</code> or <code>false</code></td></tr><tr><td><code>exists</code></td><td>Check value existence (not None and not empty string)</td><td><code>{field|exists}</code></td><td><code>true</code> or <code>false</code></td></tr><tr><td><code>is_null</code></td><td>Check for null (None, empty string or string &quot;null&quot;)</td><td><code>{field|is_null}</code></td><td><code>true</code> or <code>false</code></td></tr><tr><td><code>value:result</code></td><td>Return value when true</td><td><code>{status|equals:active|value:Active}</code></td><td><code>Active</code> or <code>null</code></td></tr><tr><td colspan="4"><strong>Utility</strong></td></tr><tr><td><code>fallback:value</code></td><td>Default value</td><td><code>{username|fallback:Guest}</code></td><td><code>John</code> or <code>Guest</code></td></tr><tr><td><code>length</code></td><td>Count length</td><td><code>{text|length}</code></td><td><code>15</code> (character count)</td></tr><tr><td><code>length</code></td><td>Count array length</td><td><code>{array|length}</code></td><td><code>3</code> (element count)</td></tr><tr><td><code>regex:pattern</code></td><td>Extract by regex</td><td><code>{text|regex:(\\d+)}</code></td><td><code>123</code> (first number)</td></tr><tr><td colspan="4"><strong>Async Actions</strong></td></tr><tr><td><code>ready</code></td><td>Check async action readiness</td><td><code>{_async_action.ai_req_1|ready}</code></td><td><code>true</code> if completed, <code>false</code> if executing</td></tr><tr><td><code>not_ready</code></td><td>Check action still executing</td><td><code>{_async_action.ai_req_1|not_ready}</code></td><td><code>true</code> if executing, <code>false</code> if ready</td></tr></tbody></table><h2 id="usage-examples" tabindex="-1">Usage Examples: <a class="header-anchor" href="#usage-examples" aria-label="Permalink to &quot;Usage Examples:&quot;">‚Äã</a></h2><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Simple operations</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{value|+100|format:currency}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Conditional logic</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{user_status|equals:active|value:Active|fallback:Inactive}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Modifier chain</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  formatted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{price|*0.9|format:currency|fallback:0.00 ‚ÇΩ}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Regex extraction (use double quotes for backslashes!)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  duration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{event_text|regex:(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">d+)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s*min|fallback:0}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Dot notation</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{user.profile.name|fallback:Unknown}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Time values</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  duration_seconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{duration|seconds}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  duration_minutes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{duration|seconds|/60}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  duration_hours</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{duration|seconds|/3600}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  formatted_time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{duration|seconds|format:number}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Date shifting</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  tomorrow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{created|shift:+1 day}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  next_month</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{created|shift:+1 month|format:date}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  complex_shift</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{created|shift:+1 year 2 months|format:datetime}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Rounding to period start</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  start_of_day</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{created|to_date}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  start_of_week</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{created|to_week}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  formatted_month_start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{created|to_month|format:date}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Boolean fields (distinguish True/False/None)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  is_active</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{is_active|equals:True|value:‚úÖ Enabled|fallback:{is_active|equals:False|value:‚ùå Disabled|fallback:‚ùì Unknown}}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  is_polling</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{is_polling|equals:True|value:‚úÖ Active|fallback:{is_polling|equals:False|value:‚ùå Inactive|fallback:‚ùì Unknown}}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # String fields (use equals:value)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{user_status|equals:active|value:Active|fallback:Inactive}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Simplified version (if None not expected)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  is_simple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{is_active|true|value:‚úÖ Enabled|fallback:‚ùå Disabled}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Check value existence (in conditions)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # In conditions use: {field|exists} == True or {field|exists} == False</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Check for null (in conditions)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # In conditions use: {field|is_null} == True or {field|is_null} == False</span></span></code></pre></div><p><strong>Example using exists in conditions:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;validate&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      condition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{response_value.feedback|exists} == True&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    transition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action_result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;success&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        transition_action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;continue&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Value exists</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action_result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;failed&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        transition_action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;jump_to_scenario&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        transition_value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;create_feedback&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Value doesn&#39;t exist</span></span></code></pre></div><h2 id="important-boolean-vs-string-fields" tabindex="-1">Important: boolean vs string fields <a class="header-anchor" href="#important-boolean-vs-string-fields" aria-label="Permalink to &quot;Important: boolean vs string fields&quot;">‚Äã</a></h2><p><strong>For boolean fields (True/False):</strong></p><ul><li><strong>Recommended:</strong> <code>{is_active|true|value:‚úÖ Enabled|fallback:‚ùå Disabled}</code></li><li><strong>Doesn&#39;t work:</strong> <code>{is_active|equals:true|value:‚úÖ Enabled}</code> (string comparison)</li></ul><p><strong>For string fields:</strong></p><ul><li><strong>Use:</strong> <code>{status|equals:active|value:Active|fallback:Inactive}</code></li><li><code>true</code> modifier not suitable for string values</li></ul><h2 id="practical-examples" tabindex="-1">Practical Examples: <a class="header-anchor" href="#practical-examples" aria-label="Permalink to &quot;Practical Examples:&quot;">‚Äã</a></h2><h4 id="example-1-personalized-greeting" tabindex="-1"><strong>Example 1: Personalized greeting</strong> <a class="header-anchor" href="#example-1-personalized-greeting" aria-label="Permalink to &quot;**Example 1: Personalized greeting**&quot;">‚Äã</a></h4><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;send_message&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        üëã Hello, {username|fallback:Guest}!</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        üìä Your statistics:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        ‚Ä¢ ID: {user_id}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        ‚Ä¢ Chats: {chat_count|fallback:0}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        ‚Ä¢ Last login: {last_login|format:datetime|fallback:Unknown}</span></span></code></pre></div><h4 id="example-2-dynamic-menu-with-conditions" tabindex="-1"><strong>Example 2: Dynamic menu with conditions</strong> <a class="header-anchor" href="#example-2-dynamic-menu-with-conditions" aria-label="Permalink to &quot;**Example 2: Dynamic menu with conditions**&quot;">‚Äã</a></h4><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;send_message&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        üéõÔ∏è Main Menu</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Status: {user_status|equals:active|value:‚úÖ Active|fallback:‚ùå Inactive}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Balance: {balance|format:currency|fallback:0.00 ‚ÇΩ}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      inline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - [{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;üìä Statistics&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stats&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;üí∞ Balance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;balance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - [{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;‚öôÔ∏è Settings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;settings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}]</span></span></code></pre></div><h4 id="example-3-error-handling-with-fallback" tabindex="-1"><strong>Example 3: Error handling with fallback</strong> <a class="header-anchor" href="#example-3-error-handling-with-fallback" aria-label="Permalink to &quot;**Example 3: Error handling with fallback**&quot;">‚Äã</a></h4><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;send_message&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        ‚ùå Processing error</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Error code: {error_code|fallback:UNKNOWN}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Message: {error_message|fallback:Unknown error}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Time: {timestamp|format:datetime}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      inline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - [{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;üîÑ Retry&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;retry&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;üè† Main Menu&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}]</span></span></code></pre></div><h4 id="example-4-mathematical-calculations" tabindex="-1"><strong>Example 4: Mathematical calculations</strong> <a class="header-anchor" href="#example-4-mathematical-calculations" aria-label="Permalink to &quot;**Example 4: Mathematical calculations**&quot;">‚Äã</a></h4><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;send_message&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        üí∞ Cost calculation</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Price: {base_price|format:currency}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Discount: {discount_percent|fallback:0}%</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Total: {base_price|*{discount_percent|/100}|*{base_price|-1}|+{base_price}|format:currency}</span></span></code></pre></div><h4 id="example-5-extracting-data-from-text" tabindex="-1"><strong>Example 5: Extracting data from text</strong> <a class="header-anchor" href="#example-5-extracting-data-from-text" aria-label="Permalink to &quot;**Example 5: Extracting data from text**&quot;">‚Äã</a></h4><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;send_message&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        üìù Processing order</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Order number: &quot;{event_text|regex:order\\\\s*(\\\\d+)|fallback:Not found}&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Amount: &quot;{event_text|regex:amount\\\\s*(\\\\d+)|format:currency|fallback:0.00 ‚ÇΩ}&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Delivery time: &quot;{event_text|regex:(\\\\d+)\\\\s*min|fallback:30}&quot; minutes</span></span></code></pre></div><h4 id="example-6-dynamic-keyboard-with-expand-modifier" tabindex="-1"><strong>Example 6: Dynamic keyboard with expand modifier</strong> <a class="header-anchor" href="#example-6-dynamic-keyboard-with-expand-modifier" aria-label="Permalink to &quot;**Example 6: Dynamic keyboard with expand modifier**&quot;">‚Äã</a></h4><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Get tenant list</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;get_tenants_list&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Build dynamic keyboard from public tenants</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;build_keyboard&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      items</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{public_tenant_ids}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      keyboard_type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;inline&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      text_template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Tenant $value$&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      callback_template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;select_tenant_$value$&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      buttons_per_row</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Send message with dynamic keyboard + static buttons</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;send_message&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Select tenant:&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      inline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{keyboard|expand}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # Expand dynamic keyboard</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - [{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;üîô Back&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main_menu&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}]      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Static button</span></span></code></pre></div><p><strong>How <code>expand</code> works:</strong></p><ul><li><code>expand</code> modifier expands array of arrays one level <strong>only when used in array</strong></li><li>In example above <code>{keyboard|expand}</code> in <code>inline</code> array expands <code>[[{...}, {...}], [{...}]]</code> to <code>[{...}, {...}], [{...}]</code></li><li>This allows combining dynamically generated keyboard rows with static rows</li><li><strong>Important:</strong> <code>expand</code> works only in array context. In string or dict value remains unchanged</li></ul><p><strong>Example without expand (incorrect):</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">inline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{keyboard}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                           # ‚ùå Gets [[[...]], [...]] - 3 nesting levels!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - [{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;üîô Back&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main_menu&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}]</span></span></code></pre></div><p><strong>Example with expand (correct):</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">inline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{keyboard|expand}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                     # ‚úÖ Gets [[...], [...]] - 2 nesting levels</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - [{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;üîô Back&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main_menu&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}]</span></span></code></pre></div>`,75)])])}const E=i(n,[["render",l]]);export{c as __pageData,E as default};
