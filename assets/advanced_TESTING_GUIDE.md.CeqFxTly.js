import{_ as i,o as a,c as n,af as t}from"./chunks/framework.DZTH9Z-c.js";const c=JSON.parse('{"title":"Руководство по тестированию","description":"Подходы к тестированию в Coreness. Unit тесты, интеграционное тестирование, E2E тесты и тестирование сценариев.","frontmatter":{"title":"Руководство по тестированию","description":"Подходы к тестированию в Coreness. Unit тесты, интеграционное тестирование, E2E тесты и тестирование сценариев.","keywords":"тестирование coreness, unit tests, integration testing, e2e testing, pytest","head":[["meta",{"property":"og:title","content":"Руководство по тестированию | Coreness"}],["meta",{"property":"og:description","content":"Подходы к тестированию в Coreness. Unit тесты, интеграционное тестирование, E2E тесты и тестирование сценариев."}],["meta",{"property":"og:image","content":"https://docs.coreness.tech/logo-dark.png"}],["meta",{"property":"og:url","content":"https://docs.coreness.tech/advanced/TESTING_GUIDE"}],["link",{"rel":"canonical","href":"https://docs.coreness.tech/advanced/TESTING_GUIDE"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"TechArticle\\",\\"headline\\":\\"Руководство по тестированию\\",\\"description\\":\\"Подходы к тестированию в Coreness. Unit тесты, интеграционное тестирование, E2E тесты и тестирование сценариев.\\",\\"url\\":\\"https://docs.coreness.tech/advanced/TESTING_GUIDE\\"}"]]},"headers":[],"relativePath":"advanced/TESTING_GUIDE.md","filePath":"advanced/TESTING_GUIDE.md"}'),e={name:"advanced/TESTING_GUIDE.md"};function p(l,s,h,k,r,o){return a(),n("div",null,[...s[0]||(s[0]=[t(`<h1 id="руководство-по-тестированию" tabindex="-1">Руководство по тестированию <a class="header-anchor" href="#руководство-по-тестированию" aria-label="Permalink to &quot;Руководство по тестированию&quot;">​</a></h1><p>Полное руководство по тестированию проекта, включая Python тесты (pytest).</p><h2 id="структура-тестов" tabindex="-1">Структура тестов <a class="header-anchor" href="#структура-тестов" aria-label="Permalink to &quot;Структура тестов&quot;">​</a></h2><h3 id="python-тесты" tabindex="-1">Python тесты <a class="header-anchor" href="#python-тесты" aria-label="Permalink to &quot;Python тесты&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>tests/</span></span>
<span class="line"><span>├── conftest.py          # Базовые фикстуры для всех тестов</span></span>
<span class="line"><span>├── utils.py             # Утилиты для тестов (find_project_root)</span></span>
<span class="line"><span>├── requirements.txt     # Тестовые зависимости (включают основные + pytest)</span></span>
<span class="line"><span>├── unit/                # Unit-тесты (изолированные тесты модулей)</span></span>
<span class="line"><span>└── integration/         # Integration-тесты (тесты через DI-контейнер)</span></span></code></pre></div><p>Тесты также могут находиться прямо в папках сервисов/утилит:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>plugins/</span></span>
<span class="line"><span>└── utilities/</span></span>
<span class="line"><span>    └── core/</span></span>
<span class="line"><span>        └── condition_parser/</span></span>
<span class="line"><span>            ├── condition_parser.py</span></span>
<span class="line"><span>            └── tests/</span></span>
<span class="line"><span>                ├── conftest.py          # Локальные фикстуры</span></span>
<span class="line"><span>                └── test_baseline.py    # Тесты</span></span></code></pre></div><h2 id="установка-зависимостеи" tabindex="-1">Установка зависимостей <a class="header-anchor" href="#установка-зависимостеи" aria-label="Permalink to &quot;Установка зависимостей&quot;">​</a></h2><h3 id="python-тесты-1" tabindex="-1">Python тесты <a class="header-anchor" href="#python-тесты-1" aria-label="Permalink to &quot;Python тесты&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Установить тестовые зависимости (включают основные + pytest)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tests/requirements.txt</span></span></code></pre></div><p><strong>Важно:</strong> <code>tests/requirements.txt</code> включает все основные зависимости через <code>-r ../requirements.txt</code>, поэтому тесты могут импортировать модули проекта.</p><h2 id="запуск-тестов" tabindex="-1">Запуск тестов <a class="header-anchor" href="#запуск-тестов" aria-label="Permalink to &quot;Запуск тестов&quot;">​</a></h2><h3 id="python-тесты-pytest" tabindex="-1">Python тесты (pytest) <a class="header-anchor" href="#python-тесты-pytest" aria-label="Permalink to &quot;Python тесты (pytest)&quot;">​</a></h3><h4 id="все-тесты" tabindex="-1">Все тесты <a class="header-anchor" href="#все-тесты" aria-label="Permalink to &quot;Все тесты&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Из корня проекта</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pytest</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># С подробным выводом</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pytest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># С покрытием кода</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pytest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cov=plugins</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cov=app</span></span></code></pre></div><h4 id="конкретныи-тест" tabindex="-1">Конкретный тест <a class="header-anchor" href="#конкретныи-тест" aria-label="Permalink to &quot;Конкретный тест&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># По пути к файлу</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pytest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plugins/utilities/core/condition_parser/tests/test_baseline.py</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Конкретная функция</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pytest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plugins/utilities/core/condition_parser/tests/test_baseline.py::test_basic_comparison_operators</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># С маркером</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pytest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pytest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> integration</span></span></code></pre></div><h4 id="фильтрация-тестов" tabindex="-1">Фильтрация тестов <a class="header-anchor" href="#фильтрация-тестов" aria-label="Permalink to &quot;Фильтрация тестов&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Только unit-тесты</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pytest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Только integration-тесты</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pytest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> integration</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># По имени файла/функции</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pytest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -k</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;condition_parser&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pytest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -k</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;test_basic&quot;</span></span></code></pre></div><h4 id="отладка" tabindex="-1">Отладка <a class="header-anchor" href="#отладка" aria-label="Permalink to &quot;Отладка&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Остановиться на первой ошибке</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pytest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -x</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Показать print() вывод</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pytest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Подробный traceback</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pytest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tb=long</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Запустить только последние упавшие тесты</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pytest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --lf</span></span></code></pre></div><h2 id="типы-тестов" tabindex="-1">Типы тестов <a class="header-anchor" href="#типы-тестов" aria-label="Permalink to &quot;Типы тестов&quot;">​</a></h2><h3 id="unit-тесты-tests-unit-или-рядом-с-кодом" tabindex="-1">Unit-тесты (<code>tests/unit/</code> или рядом с кодом) <a class="header-anchor" href="#unit-тесты-tests-unit-или-рядом-с-кодом" aria-label="Permalink to &quot;Unit-тесты (\`tests/unit/\` или рядом с кодом)&quot;">​</a></h3><ul><li>Изолированные тесты модулей без внешних зависимостей</li><li>Все зависимости заменены моками</li><li>Быстрые и простые в отладке</li></ul><p><strong>Пример:</strong></p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># plugins/utilities/core/condition_parser/tests/test_baseline.py</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pytest</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> plugins.utilities.core.condition_parser.condition_parser </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConditionParser</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@pytest.fixture</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> parser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(logger):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ConditionParser(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">logger</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@pytest.mark.asyncio</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> test_condition_parser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(parser):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parser.check_match(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;$x == 1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">is</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span></span></code></pre></div><h3 id="integration-тесты-tests-integration" tabindex="-1">Integration-тесты (<code>tests/integration/</code>) <a class="header-anchor" href="#integration-тесты-tests-integration" aria-label="Permalink to &quot;Integration-тесты (\`tests/integration/\`)&quot;">​</a></h3><ul><li>Тесты взаимодействия компонентов через DI-контейнер</li><li>Используют реальные зависимости (через DI)</li><li>Могут использовать тестовую БД</li></ul><p><strong>Пример:</strong></p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># tests/integration/test_di_container.py</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pytest</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@pytest.mark.asyncio</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> test_di_resolves_dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(initialized_di_container):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    db_manager </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> initialized_di_container.get_utility(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;database_manager&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db_manager </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">is</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span></span></code></pre></div><h2 id="доступные-фикстуры-python-тесты" tabindex="-1">Доступные фикстуры (Python тесты) <a class="header-anchor" href="#доступные-фикстуры-python-тесты" aria-label="Permalink to &quot;Доступные фикстуры (Python тесты)&quot;">​</a></h2><p>См. <code>tests/conftest.py</code> для полного списка фикстур:</p><ul><li><code>logger</code> - Logger для тестов</li><li><code>di_container</code> - DI-контейнер (без инициализации)</li><li><code>initialized_di_container</code> - DI-контейнер с инициализированными плагинами</li><li><code>test_database_url</code> - URL для тестовой БД (SQLite в памяти)</li><li><code>test_database_engine</code> - SQLAlchemy engine для тестовой БД</li><li><code>test_database_session</code> - SQLAlchemy session для тестовой БД</li><li><code>temp_dir</code> - Временная директория для тестов</li><li><code>project_root</code> - Корень проекта</li></ul><h2 id="определение-корня-проекта" tabindex="-1">Определение корня проекта <a class="header-anchor" href="#определение-корня-проекта" aria-label="Permalink to &quot;Определение корня проекта&quot;">​</a></h2><p><strong>Не нужно вручную определять корень проекта в тестах!</strong></p><p>Корень проекта автоматически добавляется в <code>sys.path</code> через <code>pythonpath = [&quot;.&quot;]</code> в <code>pyproject.toml</code>. Это происходит ДО загрузки всех <code>conftest.py</code> файлов, поэтому все тесты могут использовать абсолютные импорты.</p><p>Если нужно получить путь к корню проекта в тесте, используйте фикстуру <code>project_root</code>:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> test_something</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(project_root):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    config_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> project_root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;config&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;settings.yaml&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config_path.exists()</span></span></code></pre></div><h2 id="маркеры-pytest" tabindex="-1">Маркеры (pytest) <a class="header-anchor" href="#маркеры-pytest" aria-label="Permalink to &quot;Маркеры (pytest)&quot;">​</a></h2><ul><li><code>@pytest.mark.unit</code> - Unit-тесты</li><li><code>@pytest.mark.integration</code> - Integration-тесты</li><li><code>@pytest.mark.asyncio</code> - Асинхронные тесты</li></ul><h2 id="ci-cd" tabindex="-1">CI/CD <a class="header-anchor" href="#ci-cd" aria-label="Permalink to &quot;CI/CD&quot;">​</a></h2><h3 id="github-actions" tabindex="-1">GitHub Actions <a class="header-anchor" href="#github-actions" aria-label="Permalink to &quot;GitHub Actions&quot;">​</a></h3><p>Тесты автоматически запускаются в CI:</p><ol><li><strong>Python тесты</strong> - через pytest в workflow</li></ol><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Установка зависимостей</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Установка зависимостей</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    pip install -r requirements.txt</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    pip install -r tests/requirements.txt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Запуск тестов</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Запуск тестов</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    pytest -v --tb=short -rA</span></span></code></pre></div><h2 id="проблемы-и-решения" tabindex="-1">Проблемы и решения <a class="header-anchor" href="#проблемы-и-решения" aria-label="Permalink to &quot;Проблемы и решения&quot;">​</a></h2><h3 id="тест-не-запускается" tabindex="-1">Тест не запускается <a class="header-anchor" href="#тест-не-запускается" aria-label="Permalink to &quot;Тест не запускается&quot;">​</a></h3><p><strong>Проблема:</strong> <code>ModuleNotFoundError: No module named &#39;plugins&#39;</code></p><p><strong>Решение:</strong> Убедитесь, что запускаете тесты через <code>pytest</code>, а не напрямую через Python:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ✅ Правильно</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pytest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plugins/utilities/core/condition_parser/tests/test_baseline.py</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ❌ Неправильно</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> plugins/utilities/core/condition_parser/tests/test_baseline.py</span></span></code></pre></div><h3 id="фикстура-не-наидена" tabindex="-1">Фикстура не найдена <a class="header-anchor" href="#фикстура-не-наидена" aria-label="Permalink to &quot;Фикстура не найдена&quot;">​</a></h3><p><strong>Проблема:</strong> <code>fixture &#39;logger&#39; not found</code></p><p><strong>Решение:</strong> Убедитесь, что в локальном <code>conftest.py</code> правильно импортируется фикстура:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tests.conftest </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> logger  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># noqa: F401</span></span></code></pre></div><h3 id="тесты-не-находятся" tabindex="-1">Тесты не находятся <a class="header-anchor" href="#тесты-не-находятся" aria-label="Permalink to &quot;Тесты не находятся&quot;">​</a></h3><p><strong>Проблема:</strong> <code>pytest</code> не находит тесты</p><p><strong>Решение:</strong> Проверьте, что файл называется <code>test_*.py</code> или <code>*_test.py</code> и функции начинаются с <code>test_*</code>.</p>`,57)])])}const g=i(e,[["render",p]]);export{c as __pageData,g as default};
