<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Placeholders | Coreness</title>
    <meta name="description" content="Placeholder syntax, modifiers, and data access in Coreness scenarios.">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.CGFLs5QR.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.1IewfOQU.js" defer></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.Dvsq6FN_.js">
    <link rel="modulepreload" href="/assets/chunks/framework.DZTH9Z-c.js">
    <link rel="modulepreload" href="/assets/en_reference_PLACEHOLDERS.md.CgsPJmKB.lean.js">
    <link rel="icon" type="image/png" href="/logo-dark.png" media="(prefers-color-scheme: dark)">
    <link rel="icon" type="image/png" href="/logo-light.png" media="(prefers-color-scheme: light)">
    <link rel="icon" type="image/png" href="/logo-dark.png">
    <meta name="keywords" content="Coreness, AI agents, Telegram bots, YAML, documentation, –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –∞–≥–µ–Ω—Ç—ã, –±–æ—Ç—ã">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Coreness">
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","name":"Coreness","url":"https://docs.coreness.tech","description":"Self-hosted multitenant platform for AI agents with event-driven architecture."}</script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareApplication","name":"Coreness","description":"Self-hosted multitenant platform for AI agents with event-driven architecture.","url":"https://docs.coreness.tech","applicationCategory":"DeveloperApplication","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"}}</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"dark",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <meta property="og:title" content="Placeholders | Coreness">
    <meta property="og:description" content="Placeholder syntax, modifiers, and data access in Coreness scenarios.">
    <meta property="og:image" content="https://docs.coreness.tech/logo-dark.png">
    <meta property="og:url" content="https://docs.coreness.tech/en/reference/PLACEHOLDERS">
    <link rel="canonical" href="https://docs.coreness.tech/en/reference/PLACEHOLDERS">
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"TechArticle","headline":"Placeholders","description":"Placeholder syntax, modifiers, and data access in Coreness scenarios.","url":"https://docs.coreness.tech/en/reference/PLACEHOLDERS"}</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/en/" data-v-1168a8e4><!--[--><!--]--><!----><span data-v-1168a8e4>Coreness</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://coreness.tech" target="_blank" rel="noreferrer" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Coreness.tech</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://github.com/Vensus137/Coreness" target="_blank" rel="noreferrer" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>GitHub</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-6aa21345 data-v-88af2de4 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><span class="vpi-languages option-icon" data-v-cf11d7a2></span><!----><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><div class="items" data-v-88af2de4><p class="title" data-v-88af2de4>English</p><!--[--><div class="VPMenuLink" data-v-88af2de4 data-v-35975db6><a class="VPLink link" href="/reference/PLACEHOLDERS" data-v-35975db6><!--[--><span data-v-35975db6>–†—É—Å—Å–∫–∏–π</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="true" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Vensus137/Coreness" aria-label="GitHub" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><div class="group translations" data-v-bb2aa2f0><p class="trans-title" data-v-bb2aa2f0>English</p><!--[--><div class="VPMenuLink" data-v-bb2aa2f0 data-v-35975db6><a class="VPLink link" href="/reference/PLACEHOLDERS" data-v-35975db6><!--[--><span data-v-35975db6>–†—É—Å—Å–∫–∏–π</span><!--]--></a></div><!--]--></div><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="true" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Vensus137/Coreness" aria-label="GitHub" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Getting started</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Home</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/getting-started/" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Getting started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/getting-started/EXAMPLES_GUIDE" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Practical examples</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/getting-started/MASTER_BOT_GUIDE" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Master Bot</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Deployment</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/getting-started/DEPLOYMENT" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Deployment</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Guides</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/guides/SCENARIO_CONFIG_GUIDE" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Scenario guide</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/guides/TENANT_CONFIG_GUIDE" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Tenant configuration</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/guides/STORAGE_CONFIG_GUIDE" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Storage attributes</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 has-active" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Reference</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/reference/ACTION_GUIDE" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Actions guide</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/reference/EVENT_GUIDE" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Events guide</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/reference/PLACEHOLDERS" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Placeholders</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/reference/AI_MODELS_GUIDE" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>AI models</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Other</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/CHANGELOG" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Changelog</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible collapsed" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Advanced documentation</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/advanced/" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Overview</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/advanced/ARCHITECTURE" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Architecture</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/advanced/PLUGINS_GUIDE" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Plugins</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/advanced/PLUGIN_CONFIG_GUIDE" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Plugin configuration</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/advanced/SYSTEM_ACTION_GUIDE" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>System actions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/advanced/SETTINGS_CONFIG_GUIDE" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>System settings</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/advanced/LOGGING_GUIDE" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Logging</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/en/advanced/TESTING_GUIDE" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Testing</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _en_reference_PLACEHOLDERS" data-v-39a288b8><div><h1 id="placeholders" tabindex="-1">Placeholders <a class="header-anchor" href="#placeholders" aria-label="Permalink to &quot;Placeholders&quot;">‚Äã</a></h1><p><strong>Purpose:</strong> Dynamic value substitution in scenario action parameters.</p><h2 id="mechanics" tabindex="-1">Mechanics: <a class="header-anchor" href="#mechanics" aria-label="Permalink to &quot;Mechanics:&quot;">‚Äã</a></h2><p><strong>All attributes in <code>params</code> automatically processed by placeholders</strong> before action execution. This means:</p><ul><li><strong>All values in <code>params</code></strong> ‚Äî strings, numbers, arrays, objects ‚Äî go through placeholder processing</li><li><strong>All nesting levels</strong> ‚Äî placeholders work at any level of <code>params</code> structure (in strings, array elements, object values)</li><li><strong>Automatic processing</strong> ‚Äî happens for each scenario step before action execution</li><li><strong>Data source</strong> ‚Äî system uses accumulated event data and previous action results as value source for substitution</li></ul><h2 id="placeholder-syntax" tabindex="-1">Placeholder Syntax: <a class="header-anchor" href="#placeholder-syntax" aria-label="Permalink to &quot;Placeholder Syntax:&quot;">‚Äã</a></h2><p><strong>Simple replacement:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello, {username}!&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  chat_id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{user_id}&quot;</span></span></code></pre></div><p><strong>With modifiers:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello, {username|fallback:Guest}!&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  price</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{amount|*0.9|format:currency}&quot;</span></span></code></pre></div><p><strong>Literal values in quotes:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{&#39;hello&#39;|upper}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                      # HELLO (without passing through dictionary)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  duration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{&#39;1d 2w&#39;|seconds}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # 1296000 (literal time)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  calculation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{&#39;100&#39;|+50}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                   # 150 (literal arithmetic)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  date_shift</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{&#39;2024-12-25&#39;|shift:+1 day}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 2024-12-26 (literal date)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Double quotes for strings with single quotes</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{&quot;it&#39;s working&quot;}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                     # it&#39;s working</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Escaped quotes</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{&#39;it\&#39;s working&#39;}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    # it&#39;s working</span></span></code></pre></div><p><strong>Nested placeholders:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Answer: {status|equals:{expected}|value:OK|fallback:BAD}&quot;</span></span></code></pre></div><h2 id="‚ö†Ô∏è-important-yaml-quotes-for-placeholders-with-regex" tabindex="-1">‚ö†Ô∏è Important: YAML Quotes for Placeholders with regex <a class="header-anchor" href="#‚ö†Ô∏è-important-yaml-quotes-for-placeholders-with-regex" aria-label="Permalink to &quot;‚ö†Ô∏è Important: YAML Quotes for Placeholders with regex&quot;">‚Äã</a></h2><p><strong>Problem:</strong> YAML processes escape sequences differently in single and double quotes, which is critical for regex patterns with backslashes.</p><p><strong>Solution:</strong> Use <strong>double quotes</strong> for regex patterns with backslashes (<code>\s</code>, <code>\d</code>, <code>\w</code>, etc.).</p><p><strong>Examples:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ‚ùå ERROR - in single quotes \\s doesn&#39;t escape correctly</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{event_text|regex:^([^\\s]+)|lower}&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # \\s becomes \s (backslash + s), not space!</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ‚úÖ CORRECT - double quotes correctly escape backslashes</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{event_text|regex:^([^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s]+)|lower}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # \\s becomes \s (space in regex)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ‚úÖ CORRECT - for regex without backslashes can use single quotes</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  tenant_id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{user_state|regex:tenant_(\d+)}&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Works, as \d doesn&#39;t require double escaping</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ‚úÖ CORRECT - for simple regex with one backslash also use double quotes</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{event_text|regex:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s+([^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s]+)$|lower}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # \\s for space, \\s for space</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ‚úÖ REGULAR PLACEHOLDERS - no difference</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello, {username}!&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # Works</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello, {username}!&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Also works</span></span></code></pre></div><p><strong>When to use double quotes:</strong></p><ul><li><strong>Regex patterns with backslashes</strong> ‚Äî <code>{field|regex:pattern}</code> where pattern contains <code>\s</code>, <code>\d</code>, <code>\w</code>, <code>\n</code>, <code>\t</code>, etc.</li><li><strong>Important:</strong> In double quotes need to use double escaping: <code>\\s</code> for space, <code>\\d</code> for digit</li><li><strong>Example:</strong> <code>&quot;{event_text|regex:^([^\\s]+)|lower}&quot;</code> ‚Äî <code>\\s</code> becomes <code>\s</code> (space in regex)</li></ul><p><strong>When can use single quotes:</strong></p><ul><li><strong>Regex patterns without backslashes</strong> ‚Äî simple patterns without <code>\s</code>, <code>\d</code>, <code>\w</code>, etc.</li><li><strong>Regular placeholders</strong> ‚Äî <code>{username}</code>, <code>{user_id}</code></li><li><strong>Simple modifiers</strong> ‚Äî <code>{name|upper}</code>, <code>{price|format:currency}</code></li><li><strong>Text values</strong> ‚Äî without special characters</li></ul><p><strong>Rule:</strong> If regex pattern has backslashes (<code>\s</code>, <code>\d</code>, <code>\w</code>, etc.) ‚Äî <strong>always use double quotes</strong> with double escaping (<code>\\s</code>, <code>\\d</code>, <code>\\w</code>).</p><p><strong>Access to nested data:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Dot notation for objects</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;User: {user.profile.name|fallback:Unknown}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Message: {message.text}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Indexes for arrays</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;First file: {attachment[0].file_id}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Last user: {users[-1].name}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Combined access</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Event: {event.attachment[0].type}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Data: {response.data.items[0].value}&quot;</span></span></code></pre></div><h2 id="available-data" tabindex="-1">Available Data: <a class="header-anchor" href="#available-data" aria-label="Permalink to &quot;Available Data:&quot;">‚Äã</a></h2><p><strong>All event and previous action data available for use in placeholders:</strong></p><p><strong>Event data:</strong></p><ul><li><strong><code>user_id</code></strong> ‚Äî user ID</li><li><strong><code>username</code></strong> ‚Äî username</li><li><strong><code>chat_id</code></strong> ‚Äî chat ID</li><li><strong><code>event_text</code></strong> ‚Äî message text</li><li><strong><code>callback_data</code></strong> ‚Äî callback button data</li><li><strong><code>event_date</code></strong> ‚Äî event time</li><li><strong><code>tenant_id</code></strong> ‚Äî tenant ID</li><li><strong><code>message_id</code></strong> ‚Äî message ID</li><li><strong><code>reply_to_message_id</code></strong> ‚Äî ID of message being replied to</li><li><strong><code>forward_from</code></strong> ‚Äî forwarding data</li><li><strong>And any other fields</strong> ‚Äî depending on event type</li></ul><p><strong>Tenant configuration:</strong></p><ul><li><strong><code>_config</code></strong> ‚Äî dictionary with tenant configuration (attributes from <code>config.yaml</code>) <ul><li><strong><code>_config.ai_token</code></strong> ‚Äî AI API key for tenant (if set)</li><li><strong>Other attributes</strong> ‚Äî depending on tenant configuration</li><li>Automatically available in all tenant scenarios</li></ul></li></ul><p><strong>Previous action data:</strong></p><ul><li><strong><code>last_message_id</code></strong> ‚Äî last sent message ID</li><li><strong><code>response_data</code></strong> ‚Äî any data returned by previous actions</li><li><strong>Other fields</strong> ‚Äî depending on actions in scenario</li></ul><h2 id="accessing-nested-elements" tabindex="-1">Accessing Nested Elements: <a class="header-anchor" href="#accessing-nested-elements" aria-label="Permalink to &quot;Accessing Nested Elements:&quot;">‚Äã</a></h2><blockquote><p><strong>Universal data access!</strong> Support for dot notation for objects and indexes for arrays.</p></blockquote><table><thead><tr><th>Syntax</th><th>Description</th><th>Example</th><th>Result</th></tr></thead><tbody><tr><td colspan="4"><strong>Objects</strong></td></tr><tr><td><code>object.field</code></td><td>Access object field</td><td><code>{message.text}</code></td><td><code>Hello world</code></td></tr><tr><td><code>object.field.subfield</code></td><td>Nested fields</td><td><code>{user.profile.name}</code></td><td><code>John Doe</code></td></tr><tr><td colspan="4"><strong>Arrays</strong></td></tr><tr><td><code>array[index]</code></td><td>Access array element</td><td><code>{attachment[0].file_id}</code></td><td><code>file_1</code> (first file)</td></tr><tr><td><code>array[-index]</code></td><td>Negative index</td><td><code>{attachment[-1].file_id}</code></td><td><code>file_3</code> (last file)</td></tr><tr><td><code>array[index].field</code></td><td>Array element field</td><td><code>{users[1].name}</code></td><td><code>Bob</code> (second user name)</td></tr><tr><td><code>array[index][index]</code></td><td>Nested arrays</td><td><code>{matrix[0][1]}</code></td><td><code>2</code> (matrix element)</td></tr><tr><td colspan="4"><strong>Combined</strong></td></tr><tr><td><code>object.array[index].field</code></td><td>Mixed access</td><td><code>{event.attachment[0].file_id}</code></td><td><code>file_1</code></td></tr></tbody></table><p><strong>Usage Examples:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Objects</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Message: {message.text}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;User: {user.profile.name|fallback:Unknown}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Arrays</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;First file: {attachment[0].file_id}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Last user: {users[-1].name|upper}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;File: {attachment[0].file_id}, size: {attachment[0].size}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Combined access</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Event: {event.attachment[0].type}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Data: {response.data.items[0].value}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Tenant configuration</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Token: {_config.ai_token|fallback:Not set}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Safe access</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{attachment[10].file_id|fallback:File not found}&quot;</span></span></code></pre></div><h2 id="getting-file-information" tabindex="-1">Getting File Information <a class="header-anchor" href="#getting-file-information" aria-label="Permalink to &quot;Getting File Information&quot;">‚Äã</a></h2><p><strong>Practical example: Getting file_id and type for forwarding files</strong></p><p>Create scenario that shows file_id and type of all event attachments:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">file_info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Getting file_id and type of attachments for subsequent forwarding&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  trigger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">event_type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;message&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      event_text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/file&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;send_message&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          üìé File information:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          file_id: &lt;code&gt;{event_attachment[0].file_id|fallback:{reply_attachment[0].file_id|fallback:File not found}}&lt;/code&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          type: &lt;code&gt;{event_attachment[0].type|fallback:{reply_attachment[0].type|fallback:Type not found}}&lt;/code&gt;</span></span></code></pre></div><p><strong>Error handling:</strong></p><ul><li>When accessing non-existent field/index returns <code>None</code></li><li>Can use <code>fallback</code> modifier for default value</li><li>Negative indexes work like in Python: <code>-1</code> = last element</li><li>Unlimited nesting depth supported</li></ul><h2 id="modifiers" tabindex="-1">Modifiers: <a class="header-anchor" href="#modifiers" aria-label="Permalink to &quot;Modifiers:&quot;">‚Äã</a></h2><table><thead><tr><th>Modifier</th><th>Description</th><th>Example</th><th>Result</th></tr></thead><tbody><tr><td colspan="4"><strong>Arithmetic Operations</strong></td></tr><tr><td><code>+value</code></td><td>Addition</td><td><code>{price|+100}</code></td><td><code>1500</code> (if price=1400)</td></tr><tr><td><code>-value</code></td><td>Subtraction</td><td><code>{price|-50}</code></td><td><code>1350</code> (if price=1400)</td></tr><tr><td><code>*value</code></td><td>Multiplication</td><td><code>{price|*0.9}</code></td><td><code>1260</code> (if price=1400)</td></tr><tr><td><code>/value</code></td><td>Division</td><td><code>{seconds|/3600}</code></td><td><code>2.5</code> (if seconds=9000)</td></tr><tr><td><code>%value</code></td><td>Modulo</td><td><code>{number|%7}</code></td><td><code>3</code> (if number=10)</td></tr><tr><td colspan="4"><strong>Case</strong></td></tr><tr><td><code>upper</code></td><td>Uppercase</td><td><code>{name|upper}</code></td><td><code>JOHN</code> (if name=&quot;John&quot;)</td></tr><tr><td><code>lower</code></td><td>Lowercase</td><td><code>{name|lower}</code></td><td><code>john</code> (if name=&quot;John&quot;)</td></tr><tr><td><code>title</code></td><td>Title case each word</td><td><code>{name|title}</code></td><td><code>John Doe</code> (if name=&quot;john doe&quot;)</td></tr><tr><td><code>capitalize</code></td><td>First letter uppercase</td><td><code>{name|capitalize}</code></td><td><code>John</code> (if name=&quot;john&quot;)</td></tr><tr><td><code>case:type</code></td><td>Case conversion</td><td><code>{name|case:upper}</code></td><td><code>JOHN</code> (if name=&quot;John&quot;)</td></tr><tr><td colspan="4"><strong>Lists</strong></td></tr><tr><td><code>tags</code></td><td>Convert to tags</td><td><code>{users|tags}</code></td><td><code>@user1 @user2</code></td></tr><tr><td><code>list</code></td><td>Bulleted list</td><td><code>{items|list}</code></td><td><code>‚Ä¢ item1\n‚Ä¢ item2</code></td></tr><tr><td><code>comma</code></td><td>Comma separated</td><td><code>{items|comma}</code></td><td><code>item1, item2</code></td></tr><tr><td><code>expand</code></td><td>Expand array of arrays one level (in arrays only)</td><td><code>{keyboard|expand}</code></td><td><code>[[a, b], [c]]</code> ‚Üí <code>[a, b], [c]</code> (in array)</td></tr><tr><td><code>keys</code></td><td>Extract keys from object (dict) to array</td><td><code>{storage_values|keys}</code></td><td><code>[&quot;group1&quot;, &quot;group2&quot;]</code> (if storage_values={&quot;group1&quot;: {...}, &quot;group2&quot;: {...}})</td></tr><tr><td colspan="4"><strong>Transformations</strong></td></tr><tr><td><code>code</code></td><td>Wrap value in code block</td><td><code>{field|code}</code></td><td><code>&lt;code&gt;value&lt;/code&gt;</code></td></tr><tr><td colspan="4"><strong>String Formatting</strong></td></tr><tr><td><code>truncate:length</code></td><td>Truncate text</td><td><code>{text|truncate:50}</code></td><td><code>Very long text...</code></td></tr><tr><td colspan="4"><strong>Date &amp; Time Operations</strong></td></tr><tr><td><code>shift:¬±interval</code></td><td>Shift date by interval (PostgreSQL style: +1 day, -2 hours, +1 year 2 months). Supports all date formats including ISO with timezone, correct month/year handling</td><td><code>{created|shift:+1 day}</code></td><td><code>2024-12-26</code> (if created=&quot;2024-12-25&quot;)</td></tr><tr><td><code>seconds</code></td><td>Convert time strings to seconds (supports format: Xw Yd Zh Km Ms)</td><td><code>{duration|seconds}</code></td><td><code>9000</code> (if duration=&quot;2h 30m&quot;)</td></tr><tr><td><code>to_date</code></td><td>Round date to day start (00:00:00), returns ISO format</td><td><code>{created|to_date}</code></td><td><code>2024-12-25 00:00:00</code></td></tr><tr><td><code>to_hour</code></td><td>Round date to hour start (minutes and seconds = 0), returns ISO format</td><td><code>{created|to_hour}</code></td><td><code>2024-12-25 15:00:00</code> (if created=&quot;2024-12-25 15:30:45&quot;)</td></tr><tr><td><code>to_minute</code></td><td>Round date to minute start (seconds = 0), returns ISO format</td><td><code>{created|to_minute}</code></td><td><code>2024-12-25 15:30:00</code> (if created=&quot;2024-12-25 15:30:45&quot;)</td></tr><tr><td><code>to_second</code></td><td>Round date to second start (microseconds = 0), returns ISO format</td><td><code>{created|to_second}</code></td><td><code>2024-12-25 15:30:45</code></td></tr><tr><td><code>to_week</code></td><td>Round date to week start (Monday 00:00:00), returns ISO format</td><td><code>{created|to_week}</code></td><td><code>2024-12-23 00:00:00</code> (if created=&quot;2024-12-25 15:30:45&quot;)</td></tr><tr><td><code>to_month</code></td><td>Round date to month start (1st day, 00:00:00), returns ISO format</td><td><code>{created|to_month}</code></td><td><code>2024-12-01 00:00:00</code> (if created=&quot;2024-12-25 15:30:45&quot;)</td></tr><tr><td><code>to_year</code></td><td>Round date to year start (January 1st, 00:00:00), returns ISO format</td><td><code>{created|to_year}</code></td><td><code>2024-01-01 00:00:00</code> (if created=&quot;2024-12-25 15:30:45&quot;)</td></tr><tr><td colspan="4"><strong>Date &amp; Time Formatting</strong></td></tr><tr><td><code>format:timestamp</code></td><td>Convert to Unix timestamp</td><td><code>{date|format:timestamp}</code></td><td><code>1703512200</code></td></tr><tr><td><code>format:date</code></td><td>Date format (dd.mm.yyyy)</td><td><code>{timestamp|format:date}</code></td><td><code>25.12.2024</code></td></tr><tr><td><code>format:time</code></td><td>Time format (HH:MM)</td><td><code>{timestamp|format:time}</code></td><td><code>14:30</code></td></tr><tr><td><code>format:time_full</code></td><td>Time format with seconds (HH:MM:SS)</td><td><code>{timestamp|format:time_full}</code></td><td><code>14:30:45</code></td></tr><tr><td><code>format:datetime</code></td><td>Full format (dd.mm.yyyy HH:MM)</td><td><code>{timestamp|format:datetime}</code></td><td><code>25.12.2024 14:30</code></td></tr><tr><td><code>format:datetime_full</code></td><td>Full format with seconds (dd.mm.yyyy HH:MM:SS)</td><td><code>{timestamp|format:datetime_full}</code></td><td><code>25.12.2024 14:30:45</code></td></tr><tr><td><code>format:pg_date</code></td><td>PostgreSQL date format (YYYY-MM-DD)</td><td><code>{timestamp|format:pg_date}</code></td><td><code>2024-12-25</code></td></tr><tr><td><code>format:pg_datetime</code></td><td>PostgreSQL date-time format (YYYY-MM-DD HH:MM:SS)</td><td><code>{timestamp|format:pg_datetime}</code></td><td><code>2024-12-25 14:30:45</code></td></tr><tr><td colspan="4"><strong>Number Formatting</strong></td></tr><tr><td><code>format:currency</code></td><td>Currency formatting</td><td><code>{amount|format:currency}</code></td><td><code>1000.00 ‚ÇΩ</code></td></tr><tr><td><code>format:percent</code></td><td>Percentage formatting</td><td><code>{value|format:percent}</code></td><td><code>25.5%</code></td></tr><tr><td><code>format:number</code></td><td>Number formatting</td><td><code>{value|format:number}</code></td><td><code>1234.56</code></td></tr><tr><td colspan="4"><strong>Conditional</strong></td></tr><tr><td><code>equals:value</code></td><td>Equality check (string comparison)</td><td><code>{status|equals:active}</code></td><td><code>true</code> or <code>false</code></td></tr><tr><td><code>in_list:items</code></td><td>Check inclusion in list</td><td><code>{role|in_list:admin,moderator}</code></td><td><code>true</code> or <code>false</code></td></tr><tr><td><code>true</code></td><td>Truth check (recommended for boolean)</td><td><code>{is_active|true}</code></td><td><code>true</code> or <code>false</code></td></tr><tr><td><code>exists</code></td><td>Check value existence (not None and not empty string)</td><td><code>{field|exists}</code></td><td><code>true</code> or <code>false</code></td></tr><tr><td><code>is_null</code></td><td>Check for null (None, empty string or string &quot;null&quot;)</td><td><code>{field|is_null}</code></td><td><code>true</code> or <code>false</code></td></tr><tr><td><code>value:result</code></td><td>Return value when true</td><td><code>{status|equals:active|value:Active}</code></td><td><code>Active</code> or <code>null</code></td></tr><tr><td colspan="4"><strong>Utility</strong></td></tr><tr><td><code>fallback:value</code></td><td>Default value</td><td><code>{username|fallback:Guest}</code></td><td><code>John</code> or <code>Guest</code></td></tr><tr><td><code>length</code></td><td>Count length</td><td><code>{text|length}</code></td><td><code>15</code> (character count)</td></tr><tr><td><code>length</code></td><td>Count array length</td><td><code>{array|length}</code></td><td><code>3</code> (element count)</td></tr><tr><td><code>regex:pattern</code></td><td>Extract by regex</td><td><code>{text|regex:(\d+)}</code></td><td><code>123</code> (first number)</td></tr><tr><td colspan="4"><strong>Async Actions</strong></td></tr><tr><td><code>ready</code></td><td>Check async action readiness</td><td><code>{_async_action.ai_req_1|ready}</code></td><td><code>true</code> if completed, <code>false</code> if executing</td></tr><tr><td><code>not_ready</code></td><td>Check action still executing</td><td><code>{_async_action.ai_req_1|not_ready}</code></td><td><code>true</code> if executing, <code>false</code> if ready</td></tr></tbody></table><h2 id="usage-examples" tabindex="-1">Usage Examples: <a class="header-anchor" href="#usage-examples" aria-label="Permalink to &quot;Usage Examples:&quot;">‚Äã</a></h2><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Simple operations</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{value|+100|format:currency}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Conditional logic</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{user_status|equals:active|value:Active|fallback:Inactive}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Modifier chain</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  formatted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{price|*0.9|format:currency|fallback:0.00 ‚ÇΩ}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Regex extraction (use double quotes for backslashes!)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  duration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{event_text|regex:(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">d+)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s*min|fallback:0}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Dot notation</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{user.profile.name|fallback:Unknown}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Time values</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  duration_seconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{duration|seconds}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  duration_minutes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{duration|seconds|/60}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  duration_hours</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{duration|seconds|/3600}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  formatted_time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{duration|seconds|format:number}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Date shifting</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  tomorrow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{created|shift:+1 day}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  next_month</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{created|shift:+1 month|format:date}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  complex_shift</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{created|shift:+1 year 2 months|format:datetime}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Rounding to period start</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  start_of_day</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{created|to_date}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  start_of_week</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{created|to_week}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  formatted_month_start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{created|to_month|format:date}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Boolean fields (distinguish True/False/None)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  is_active</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{is_active|equals:True|value:‚úÖ Enabled|fallback:{is_active|equals:False|value:‚ùå Disabled|fallback:‚ùì Unknown}}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  is_polling</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{is_polling|equals:True|value:‚úÖ Active|fallback:{is_polling|equals:False|value:‚ùå Inactive|fallback:‚ùì Unknown}}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # String fields (use equals:value)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{user_status|equals:active|value:Active|fallback:Inactive}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Simplified version (if None not expected)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  is_simple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{is_active|true|value:‚úÖ Enabled|fallback:‚ùå Disabled}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Check value existence (in conditions)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # In conditions use: {field|exists} == True or {field|exists} == False</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Check for null (in conditions)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # In conditions use: {field|is_null} == True or {field|is_null} == False</span></span></code></pre></div><p><strong>Example using exists in conditions:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;validate&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      condition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{response_value.feedback|exists} == True&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    transition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action_result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;success&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        transition_action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;continue&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Value exists</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action_result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;failed&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        transition_action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;jump_to_scenario&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        transition_value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;create_feedback&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Value doesn&#39;t exist</span></span></code></pre></div><h2 id="important-boolean-vs-string-fields" tabindex="-1">Important: boolean vs string fields <a class="header-anchor" href="#important-boolean-vs-string-fields" aria-label="Permalink to &quot;Important: boolean vs string fields&quot;">‚Äã</a></h2><p><strong>For boolean fields (True/False):</strong></p><ul><li><strong>Recommended:</strong> <code>{is_active|true|value:‚úÖ Enabled|fallback:‚ùå Disabled}</code></li><li><strong>Doesn&#39;t work:</strong> <code>{is_active|equals:true|value:‚úÖ Enabled}</code> (string comparison)</li></ul><p><strong>For string fields:</strong></p><ul><li><strong>Use:</strong> <code>{status|equals:active|value:Active|fallback:Inactive}</code></li><li><code>true</code> modifier not suitable for string values</li></ul><h2 id="practical-examples" tabindex="-1">Practical Examples: <a class="header-anchor" href="#practical-examples" aria-label="Permalink to &quot;Practical Examples:&quot;">‚Äã</a></h2><h4 id="example-1-personalized-greeting" tabindex="-1"><strong>Example 1: Personalized greeting</strong> <a class="header-anchor" href="#example-1-personalized-greeting" aria-label="Permalink to &quot;**Example 1: Personalized greeting**&quot;">‚Äã</a></h4><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;send_message&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        üëã Hello, {username|fallback:Guest}!</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        üìä Your statistics:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        ‚Ä¢ ID: {user_id}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        ‚Ä¢ Chats: {chat_count|fallback:0}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        ‚Ä¢ Last login: {last_login|format:datetime|fallback:Unknown}</span></span></code></pre></div><h4 id="example-2-dynamic-menu-with-conditions" tabindex="-1"><strong>Example 2: Dynamic menu with conditions</strong> <a class="header-anchor" href="#example-2-dynamic-menu-with-conditions" aria-label="Permalink to &quot;**Example 2: Dynamic menu with conditions**&quot;">‚Äã</a></h4><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;send_message&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        üéõÔ∏è Main Menu</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Status: {user_status|equals:active|value:‚úÖ Active|fallback:‚ùå Inactive}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Balance: {balance|format:currency|fallback:0.00 ‚ÇΩ}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      inline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - [{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;üìä Statistics&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stats&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;üí∞ Balance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;balance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - [{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;‚öôÔ∏è Settings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;settings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}]</span></span></code></pre></div><h4 id="example-3-error-handling-with-fallback" tabindex="-1"><strong>Example 3: Error handling with fallback</strong> <a class="header-anchor" href="#example-3-error-handling-with-fallback" aria-label="Permalink to &quot;**Example 3: Error handling with fallback**&quot;">‚Äã</a></h4><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;send_message&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        ‚ùå Processing error</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Error code: {error_code|fallback:UNKNOWN}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Message: {error_message|fallback:Unknown error}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Time: {timestamp|format:datetime}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      inline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - [{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;üîÑ Retry&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;retry&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;üè† Main Menu&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}]</span></span></code></pre></div><h4 id="example-4-mathematical-calculations" tabindex="-1"><strong>Example 4: Mathematical calculations</strong> <a class="header-anchor" href="#example-4-mathematical-calculations" aria-label="Permalink to &quot;**Example 4: Mathematical calculations**&quot;">‚Äã</a></h4><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;send_message&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        üí∞ Cost calculation</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Price: {base_price|format:currency}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Discount: {discount_percent|fallback:0}%</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Total: {base_price|*{discount_percent|/100}|*{base_price|-1}|+{base_price}|format:currency}</span></span></code></pre></div><h4 id="example-5-extracting-data-from-text" tabindex="-1"><strong>Example 5: Extracting data from text</strong> <a class="header-anchor" href="#example-5-extracting-data-from-text" aria-label="Permalink to &quot;**Example 5: Extracting data from text**&quot;">‚Äã</a></h4><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;send_message&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        üìù Processing order</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Order number: &quot;{event_text|regex:order\\s*(\\d+)|fallback:Not found}&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Amount: &quot;{event_text|regex:amount\\s*(\\d+)|format:currency|fallback:0.00 ‚ÇΩ}&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Delivery time: &quot;{event_text|regex:(\\d+)\\s*min|fallback:30}&quot; minutes</span></span></code></pre></div><h4 id="example-6-dynamic-keyboard-with-expand-modifier" tabindex="-1"><strong>Example 6: Dynamic keyboard with expand modifier</strong> <a class="header-anchor" href="#example-6-dynamic-keyboard-with-expand-modifier" aria-label="Permalink to &quot;**Example 6: Dynamic keyboard with expand modifier**&quot;">‚Äã</a></h4><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Get tenant list</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;get_tenants_list&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Build dynamic keyboard from public tenants</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;build_keyboard&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      items</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{public_tenant_ids}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      keyboard_type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;inline&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      text_template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Tenant $value$&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      callback_template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;select_tenant_$value$&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      buttons_per_row</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Send message with dynamic keyboard + static buttons</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;send_message&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Select tenant:&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      inline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{keyboard|expand}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # Expand dynamic keyboard</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - [{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;üîô Back&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main_menu&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}]      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Static button</span></span></code></pre></div><p><strong>How <code>expand</code> works:</strong></p><ul><li><code>expand</code> modifier expands array of arrays one level <strong>only when used in array</strong></li><li>In example above <code>{keyboard|expand}</code> in <code>inline</code> array expands <code>[[{...}, {...}], [{...}]]</code> to <code>[{...}, {...}], [{...}]</code></li><li>This allows combining dynamically generated keyboard rows with static rows</li><li><strong>Important:</strong> <code>expand</code> works only in array context. In string or dict value remains unchanged</li></ul><p><strong>Example without expand (incorrect):</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">inline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{keyboard}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                           # ‚ùå Gets [[[...]], [...]] - 3 nesting levels!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - [{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;üîô Back&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main_menu&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}]</span></span></code></pre></div><p><strong>Example with expand (correct):</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">inline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{keyboard|expand}&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                     # ‚úÖ Gets [[...], [...]] - 2 nesting levels</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - [{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;üîô Back&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main_menu&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}]</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/en/reference/EVENT_GUIDE" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous</span><span class="title" data-v-e257564d>Events guide</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/en/reference/AI_MODELS_GUIDE" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next</span><span class="title" data-v-e257564d>AI models</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Coreness ‚Äî Create. Automate. Scale.</p><p class="copyright" data-v-e315a0ad>MIT License</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"advanced_architecture.md\":\"CyI7LAGX\",\"advanced_index.md\":\"ael4oo8n\",\"advanced_logging_guide.md\":\"Z5x5D3EI\",\"advanced_plugin_config_guide.md\":\"Duj1tZdE\",\"advanced_plugins_guide.md\":\"CEQ8OveI\",\"advanced_readme.md\":\"lUBGUnRK\",\"advanced_settings_config_guide.md\":\"Adc6-cX7\",\"advanced_system_action_guide.md\":\"BKTwZWQC\",\"advanced_testing_guide.md\":\"CeqFxTly\",\"changelog.md\":\"CtHiPZYO\",\"en_advanced_architecture.md\":\"DLGinutJ\",\"en_advanced_index.md\":\"B5MaUjVy\",\"en_advanced_logging_guide.md\":\"BHDVL3sI\",\"en_advanced_plugin_config_guide.md\":\"iBNRmtHP\",\"en_advanced_plugins_guide.md\":\"ZxNSJeE4\",\"en_advanced_readme.md\":\"1V-Sqc9T\",\"en_advanced_settings_config_guide.md\":\"C9_tOw-x\",\"en_advanced_system_action_guide.md\":\"SQwwb2Q0\",\"en_advanced_testing_guide.md\":\"C7IbbLWU\",\"en_changelog.md\":\"CFAzQkMU\",\"en_getting-started_deployment.md\":\"CR_kmG0W\",\"en_getting-started_examples_guide.md\":\"D1aNQO2q\",\"en_getting-started_index.md\":\"CPQunD3m\",\"en_getting-started_master_bot_guide.md\":\"DjayZJwb\",\"en_getting-started_readme.md\":\"hvy-U97A\",\"en_guides_scenario_config_guide.md\":\"D9X6NUF5\",\"en_guides_storage_config_guide.md\":\"5HJoqveK\",\"en_guides_tenant_config_guide.md\":\"C3jxsWzZ\",\"en_index.md\":\"Do7yrWWp\",\"en_readme.md\":\"Db6GE396\",\"en_reference_action_guide.md\":\"iBovHh-S\",\"en_reference_ai_models_guide.md\":\"DGr-w8lB\",\"en_reference_event_guide.md\":\"D9LRMX1j\",\"en_reference_placeholders.md\":\"CgsPJmKB\",\"getting-started_deployment.md\":\"BmmHyySc\",\"getting-started_examples_guide.md\":\"DY8IHGuX\",\"getting-started_index.md\":\"BSQ6cXRe\",\"getting-started_master_bot_guide.md\":\"D8fC33FS\",\"getting-started_readme.md\":\"CRTrtDBn\",\"guides_scenario_config_guide.md\":\"hzeI6iij\",\"guides_storage_config_guide.md\":\"DjKhrqGa\",\"guides_tenant_config_guide.md\":\"D2Vmzdt0\",\"index.md\":\"B7K7cJN1\",\"readme.md\":\"7iygN7II\",\"reference_action_guide.md\":\"gMtIcOXb\",\"reference_ai_models_guide.md\":\"D_8VpV88\",\"reference_event_guide.md\":\"DQEwBhDP\",\"reference_placeholders.md\":\"BW8NJDzR\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"ru\",\"dir\":\"ltr\",\"title\":\"Coreness\",\"description\":\"Self-hosted multitenant platform for AI agents with event-driven architecture.\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":\"dark\",\"themeConfig\":{},\"locales\":{\"root\":{\"label\":\"–†—É—Å—Å–∫–∏–π\",\"lang\":\"ru\",\"title\":\"Coreness\",\"description\":\"–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–º–µ—â–∞–µ–º–∞—è –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è AI-–∞–≥–µ–Ω—Ç–æ–≤.\",\"themeConfig\":{\"sidebar\":[{\"text\":\"–ù–∞—á–∞–ª–æ\",\"items\":[{\"text\":\"–ì–ª–∞–≤–Ω–∞—è\",\"link\":\"/\"},{\"text\":\"–ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã\",\"link\":\"/getting-started/\"},{\"text\":\"–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã\",\"link\":\"/getting-started/EXAMPLES_GUIDE\"},{\"text\":\"Master Bot\",\"link\":\"/getting-started/MASTER_BOT_GUIDE\"}]},{\"text\":\"–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ\",\"items\":[{\"text\":\"–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ\",\"link\":\"/getting-started/DEPLOYMENT\"}]},{\"text\":\"–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞\",\"items\":[{\"text\":\"–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å—Ü–µ–Ω–∞—Ä–∏—è–º\",\"link\":\"/guides/SCENARIO_CONFIG_GUIDE\"},{\"text\":\"–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ–Ω–∞–Ω—Ç–æ–≤\",\"link\":\"/guides/TENANT_CONFIG_GUIDE\"},{\"text\":\"–•—Ä–∞–Ω–∏–ª–∏—â–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤\",\"link\":\"/guides/STORAGE_CONFIG_GUIDE\"}]},{\"text\":\"–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏\",\"items\":[{\"text\":\"–ì–∞–π–¥ –ø–æ –¥–µ–π—Å—Ç–≤–∏—è–º\",\"link\":\"/reference/ACTION_GUIDE\"},{\"text\":\"–ì–∞–π–¥ –ø–æ —Å–æ–±—ã—Ç–∏—è–º\",\"link\":\"/reference/EVENT_GUIDE\"},{\"text\":\"–ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã\",\"link\":\"/reference/PLACEHOLDERS\"},{\"text\":\"–ú–æ–¥–µ–ª–∏ AI\",\"link\":\"/reference/AI_MODELS_GUIDE\"}]},{\"text\":\"–ü—Ä–æ—á–µ–µ\",\"items\":[{\"text\":\"Changelog\",\"link\":\"/CHANGELOG\"}]},{\"text\":\"–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è\",\"collapsed\":true,\"items\":[{\"text\":\"–û–±–∑–æ—Ä\",\"link\":\"/advanced/\"},{\"text\":\"–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞\",\"link\":\"/advanced/ARCHITECTURE\"},{\"text\":\"–ü–ª–∞–≥–∏–Ω—ã\",\"link\":\"/advanced/PLUGINS_GUIDE\"},{\"text\":\"–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤\",\"link\":\"/advanced/PLUGIN_CONFIG_GUIDE\"},{\"text\":\"–°–∏—Å—Ç–µ–º–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è\",\"link\":\"/advanced/SYSTEM_ACTION_GUIDE\"},{\"text\":\"–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã\",\"link\":\"/advanced/SETTINGS_CONFIG_GUIDE\"},{\"text\":\"–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ\",\"link\":\"/advanced/LOGGING_GUIDE\"},{\"text\":\"–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ\",\"link\":\"/advanced/TESTING_GUIDE\"}]}],\"nav\":[{\"text\":\"Coreness.tech\",\"link\":\"https://coreness.tech\",\"target\":\"_blank\"},{\"text\":\"GitHub\",\"link\":\"https://github.com/Vensus137/Coreness\",\"target\":\"_blank\"}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Vensus137/Coreness\",\"ariaLabel\":\"GitHub\"}],\"footer\":{\"message\":\"Coreness ‚Äî Create. Automate. Scale.\",\"copyright\":\"MIT License\"},\"docFooter\":{\"prev\":\"–ù–∞–∑–∞–¥\",\"next\":\"–î–∞–ª–µ–µ\"},\"outlineTitle\":\"–ù–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ\",\"returnToTopLabel\":\"–í–≤–µ—Ä—Ö\",\"sidebarMenuLabel\":\"–ú–µ–Ω—é\",\"darkModeSwitchLabel\":\"–¢–µ–º–∞\"}},\"en\":{\"label\":\"English\",\"lang\":\"en\",\"link\":\"/en/\",\"title\":\"Coreness\",\"description\":\"Self-hosted multitenant platform for AI agents.\",\"themeConfig\":{\"sidebar\":[{\"text\":\"Getting started\",\"items\":[{\"text\":\"Home\",\"link\":\"/en/\"},{\"text\":\"Getting started\",\"link\":\"/en/getting-started/\"},{\"text\":\"Practical examples\",\"link\":\"/en/getting-started/EXAMPLES_GUIDE\"},{\"text\":\"Master Bot\",\"link\":\"/en/getting-started/MASTER_BOT_GUIDE\"}]},{\"text\":\"Deployment\",\"items\":[{\"text\":\"Deployment\",\"link\":\"/en/getting-started/DEPLOYMENT\"}]},{\"text\":\"Guides\",\"items\":[{\"text\":\"Scenario guide\",\"link\":\"/en/guides/SCENARIO_CONFIG_GUIDE\"},{\"text\":\"Tenant configuration\",\"link\":\"/en/guides/TENANT_CONFIG_GUIDE\"},{\"text\":\"Storage attributes\",\"link\":\"/en/guides/STORAGE_CONFIG_GUIDE\"}]},{\"text\":\"Reference\",\"items\":[{\"text\":\"Actions guide\",\"link\":\"/en/reference/ACTION_GUIDE\"},{\"text\":\"Events guide\",\"link\":\"/en/reference/EVENT_GUIDE\"},{\"text\":\"Placeholders\",\"link\":\"/en/reference/PLACEHOLDERS\"},{\"text\":\"AI models\",\"link\":\"/en/reference/AI_MODELS_GUIDE\"}]},{\"text\":\"Other\",\"items\":[{\"text\":\"Changelog\",\"link\":\"/en/CHANGELOG\"}]},{\"text\":\"Advanced documentation\",\"collapsed\":true,\"items\":[{\"text\":\"Overview\",\"link\":\"/en/advanced/\"},{\"text\":\"Architecture\",\"link\":\"/en/advanced/ARCHITECTURE\"},{\"text\":\"Plugins\",\"link\":\"/en/advanced/PLUGINS_GUIDE\"},{\"text\":\"Plugin configuration\",\"link\":\"/en/advanced/PLUGIN_CONFIG_GUIDE\"},{\"text\":\"System actions\",\"link\":\"/en/advanced/SYSTEM_ACTION_GUIDE\"},{\"text\":\"System settings\",\"link\":\"/en/advanced/SETTINGS_CONFIG_GUIDE\"},{\"text\":\"Logging\",\"link\":\"/en/advanced/LOGGING_GUIDE\"},{\"text\":\"Testing\",\"link\":\"/en/advanced/TESTING_GUIDE\"}]}],\"nav\":[{\"text\":\"Coreness.tech\",\"link\":\"https://coreness.tech\",\"target\":\"_blank\"},{\"text\":\"GitHub\",\"link\":\"https://github.com/Vensus137/Coreness\",\"target\":\"_blank\"}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Vensus137/Coreness\",\"ariaLabel\":\"GitHub\"}],\"footer\":{\"message\":\"Coreness ‚Äî Create. Automate. Scale.\",\"copyright\":\"MIT License\"},\"docFooter\":{\"prev\":\"Previous\",\"next\":\"Next\"}}}},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>