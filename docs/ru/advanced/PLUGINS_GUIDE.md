---
title: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤
description: –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤ –¥–ª—è Coreness. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–ª–∞–≥–∏–Ω–æ–≤, lifecycle –º–µ—Ç–æ–¥—ã, DI –∏ –ø—Ä–∏–º–µ—Ä—ã.
keywords: —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤, coreness plugins, lifecycle methods, plugin development
---

# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–ª–∞–≥–∏–Ω–∞–º

## –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–ª–∞–≥–∏–Ω–æ–≤. –í—Å–µ –ø–ª–∞–≥–∏–Ω—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ `plugins/` –∏ –¥–µ–ª—è—Ç—Å—è –Ω–∞ –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∏–ø–∞:

üìã **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:** [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](ARCHITECTURE.md)

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫
```
plugins/
‚îú‚îÄ‚îÄ utilities/         # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ foundation/    # –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã (logger, plugins_manager)
‚îÇ   ‚îú‚îÄ‚îÄ custom_layers/ # –¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–ª–æ–∏ (telegram, api, database)
‚îÇ   ‚îú‚îÄ‚îÄ core/          # Core —É—Ç–∏–ª–∏—Ç—ã (event_processor, database_service)
‚îÇ   ‚îî‚îÄ‚îÄ extensions/    # –†–∞—Å—à–∏—Ä–µ–Ω–∏—è —É—Ç–∏–ª–∏—Ç (–Ω–µ –≤—Ö–æ–¥—è—Ç –≤ –±–∞–∑–æ–≤—É—é –≤–µ—Ä—Å–∏—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã)
‚îî‚îÄ‚îÄ services/          # –ë–∏–∑–Ω–µ—Å-—Å–µ—Ä–≤–∏—Å—ã
    ‚îú‚îÄ‚îÄ core/          # Core —Å–µ—Ä–≤–∏—Å—ã
    ‚îú‚îÄ‚îÄ hub/           # Hub —Å–µ—Ä–≤–∏—Å—ã
    ‚îú‚îÄ‚îÄ additional/    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
    ‚îî‚îÄ‚îÄ extensions/    # –†–∞—Å—à–∏—Ä–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ (–Ω–µ –≤—Ö–æ–¥—è—Ç –≤ –±–∞–∑–æ–≤—É—é –≤–µ—Ä—Å–∏—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã)
```

## –¢–∏–ø—ã –ø–ª–∞–≥–∏–Ω–æ–≤

### üîß –£—Ç–∏–ª–∏—Ç—ã (Utilities)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
  - –ù–µ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–Ω–æ–º–Ω–æ
  - –ü–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ —Å–µ—Ä–≤–∏—Å—ã –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ DI
  - –ú–æ–≥—É—Ç –∏–º–µ—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥—Ä—É–≥–∏—Ö —É—Ç–∏–ª–∏—Ç
  - –û—Ä–≥–∞–Ω–∏–∑—É—é—Ç—Å—è –ø–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º —Å–ª–æ—è–º –∏ —É—Ä–æ–≤–Ω—è–º

üìã **–ö–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–ª–æ–µ–≤:** [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ - –°–ª–æ–∏ –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ](ARCHITECTURE.md#—Å–ª–æ–∏-–∏-–∏—Ö-–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ)

### üöÄ –°–µ—Ä–≤–∏—Å—ã (Services)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Å–Ω–æ–≤–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
  - –†–∞–±–æ—Ç–∞—é—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω–æ –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
  - –ú–æ–≥—É—Ç –∏–º–µ—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `run()` –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
  - –ú–æ–≥—É—Ç –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç —É—Ç–∏–ª–∏—Ç (foundation, level-—Å–ª–æ–∏, core, database)
  - –ú–æ–≥—É—Ç –±—ã—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –≤ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (core, hub, additional)

### üîå –†–∞—Å—à–∏—Ä–µ–Ω–∏—è (Extensions)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
  - –ú–æ–≥—É—Ç –±—ã—Ç—å –∫–∞–∫ —É—Ç–∏–ª–∏—Ç–∞–º–∏, —Ç–∞–∫ –∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
  - –†–∞–∑–º–µ—â–∞—é—Ç—Å—è –≤ `plugins/utilities/extensions/` –∏–ª–∏ `plugins/services/extensions/`
  - –ü–æ–∑–≤–æ–ª—è—é—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–∑–æ–≤–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
  - –ù–µ –∑–∞—Ç–∏—Ä–∞—é—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
  - –î–æ–±–∞–≤–ª—è—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
  - –†–∞–±–æ—Ç–∞—é—Ç –ø–æ —Ç–µ–º –∂–µ –ø—Ä–∞–≤–∏–ª–∞–º, —á—Ç–æ –∏ –æ–±—ã—á–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–ª–æ–µ–≤

### Foundation ‚Äî –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?
**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è:**
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (logger)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–∞–≥–∏–Ω–∞–º–∏ (plugins_manager)
- –õ—é–±—ã—Ö —É—Ç–∏–ª–∏—Ç, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

**–ü—Ä–∏–º–µ—Ä—ã:**
```python
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: logger –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
import logging
import sys
from datetime import datetime

class Logger:
    def __init__(self):
        # –¢–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Python
        pass
```

### Custom Layers ‚Äî –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?
**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è:**
- –¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —É—Ç–∏–ª–∏—Ç (telegram, api, etc.)
- –£—Ç–∏–ª–∏—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –∏–ª–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- –£—Ç–∏–ª–∏—Ç –≤–Ω—É—Ç—Ä–∏ —Å–≤–æ–µ–≥–æ —Å–ª–æ—è (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–∑ –¥—Ä—É–≥–∏—Ö custom-—Å–ª–æ–µ–≤)

### Core ‚Äî –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?
**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è:**
- –û–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π (event_processor)
- –†–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (database_service)
- –õ—é–±—ã—Ö –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç –≤—ã—Å–æ–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è

### Services ‚Äî –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?
**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è:**
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –∏–∑ –æ—á–µ—Ä–µ–¥–∏
- –ê–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —Å –º–µ—Ç–æ–¥–æ–º `run()`

### Extensions ‚Äî –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?
**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è:**
- –†–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–ª–∞–≥–∏–Ω–∞–º–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–∑–æ–≤–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- –ü–ª–∞–≥–∏–Ω–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –¥–æ–ª–∂–Ω—ã –∑–∞—Ç–∏—Ä–∞—Ç—å—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- –°–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤ –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á

**–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ:**
1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–∞–ø–∫—É –ø–ª–∞–≥–∏–Ω–∞ –≤ `plugins/utilities/extensions/` –∏–ª–∏ `plugins/services/extensions/`
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤ –ø–∞–ø–∫–µ –µ—Å—Ç—å `config.yaml`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–†–∞—Å—à–∏—Ä–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è –∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

## –ü—Ä–∞–≤–∏–ª–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–∫–∏ –ø–ª–∞–≥–∏–Ω–∞
```
my_plugin/
‚îú‚îÄ‚îÄ config.yaml        # –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û! –ë–µ–∑ –Ω–µ–≥–æ –ø–ª–∞–≥–∏–Ω –Ω–µ –±—É–¥–µ—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω
‚îú‚îÄ‚îÄ my_plugin.py       # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø–ª–∞–≥–∏–Ω–∞
‚îî‚îÄ‚îÄ README.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** –§–∞–π–ª `config.yaml` —è–≤–ª—è–µ—Ç—Å—è **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º** –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞–≥–∏–Ω–æ–≤. –ë–µ–∑ –Ω–µ–≥–æ –ø–ª–∞–≥–∏–Ω –Ω–µ –±—É–¥–µ—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω —Å–∏—Å—Ç–µ–º–æ–π –∏ –Ω–µ —Å–º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

### 2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –ø–ª–∞–≥–∏–Ω–∞
–¢–∏–ø –ø–ª–∞–≥–∏–Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—é:
- –ï—Å–ª–∏ –ø–ª–∞–≥–∏–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `plugins/utilities/` ‚Üí **—É—Ç–∏–ª–∏—Ç–∞**
- –ï—Å–ª–∏ –ø–ª–∞–≥–∏–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `plugins/services/` ‚Üí **—Å–µ—Ä–≤–∏—Å**

### 3. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏
–ü–ª–∞–≥–∏–Ω—ã –º–æ–≥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ –ª—é–±–æ–π –≥–ª—É–±–∏–Ω–µ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏:
```
plugins/
‚îú‚îÄ‚îÄ utilities/
‚îÇ   ‚îú‚îÄ‚îÄ foundation/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger/           # Foundation —É—Ç–∏–ª–∏—Ç–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ plugins_manager/  # Foundation —É—Ç–∏–ª–∏—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ telegram/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ telegram_api/     # Telegram Bot API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ telegram_polling/ # Telegram polling
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ action_hub/       # Core —É—Ç–∏–ª–∏—Ç–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database_manager/ # Core —É—Ç–∏–ª–∏—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ extensions/
‚îÇ       ‚îî‚îÄ‚îÄ http_server/      # Extension —É—Ç–∏–ª–∏—Ç–∞
‚îî‚îÄ‚îÄ services/
    ‚îú‚îÄ‚îÄ core/
    ‚îÇ   ‚îú‚îÄ‚îÄ event_processor/  # Core —Å–µ—Ä–≤–∏—Å
    ‚îÇ   ‚îî‚îÄ‚îÄ scenario_processor/ # Core —Å–µ—Ä–≤–∏—Å
    ‚îú‚îÄ‚îÄ hub/
    ‚îÇ   ‚îú‚îÄ‚îÄ bot_hub/          # Hub —Å–µ—Ä–≤–∏—Å
    ‚îÇ   ‚îî‚îÄ‚îÄ tenant_hub/       # Hub —Å–µ—Ä–≤–∏—Å
    ‚îú‚îÄ‚îÄ additional/
    ‚îÇ   ‚îî‚îÄ‚îÄ ai_service/       # Additional —Å–µ—Ä–≤–∏—Å
    ‚îî‚îÄ‚îÄ extensions/
        ‚îú‚îÄ‚îÄ http_api_service/ # Extension —Å–µ—Ä–≤–∏—Å
        ‚îî‚îÄ‚îÄ ai_rag_service/   # Extension —Å–µ—Ä–≤–∏—Å (RAG —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞ (config.yaml)

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –ø–ª–∞–≥–∏–Ω–æ–≤ (—É—Ç–∏–ª–∏—Ç –∏ —Å–µ—Ä–≤–∏—Å–æ–≤) –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ:

üìã **[–®–∞–±–ª–æ–Ω—ã YAML-–∫–æ–Ω—Ñ–∏–≥–æ–≤ –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ —É—Ç–∏–ª–∏—Ç](PLUGIN_CONFIG_GUIDE.md)**

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è –≤—Å–µ—Ö —É—Ç–∏–ª–∏—Ç (Foundation, Core, Database, Level N)
- –®–∞–±–ª–æ–Ω –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ü–∏–∏
- –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- –ü—Ä–∞–≤–∏–ª–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ö–ª—é—á–µ–≤—ã–µ —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É —É—Ç–∏–ª–∏—Ç–∞–º–∏ –∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

## –°–∏—Å—Ç–µ–º–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

üìã **–ò–µ—Ä–∞—Ä—Ö–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –ø—Ä–∞–≤–∏–ª–∞:** [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ - –ò–µ—Ä–∞—Ä—Ö–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π](ARCHITECTURE.md#–∏–µ—Ä–∞—Ä—Ö–∏—è-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)

### –ü—Ä–∏–º–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```yaml
# Foundation —É—Ç–∏–ª–∏—Ç–∞ (logger)
# dependencies: –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏)

# Custom layer —É—Ç–∏–ª–∏—Ç–∞ (tg_bot_api)
dependencies:
  - "logger"           # Foundation —É—Ç–∏–ª–∏—Ç–∞
  - "settings_manager" # Foundation —É—Ç–∏–ª–∏—Ç–∞

# –°–µ—Ä–≤–∏—Å (chat_service)
dependencies:
  - "logger"              # Foundation —É—Ç–∏–ª–∏—Ç–∞
  - "database_service"    # Core —É—Ç–∏–ª–∏—Ç–∞
  - "event_processor"     # Core —É—Ç–∏–ª–∏—Ç–∞

# –ü–ª–∞–≥–∏–Ω —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ (–ª—é–±–æ–π —Ç–∏–ø)
dependencies:
  - "logger"              # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
  - "hash_manager"        # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
optional_dependencies:
  - "cache_service"       # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
  - "analytics_service"   # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏.

## –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –ø–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏

### –ê–ª–≥–æ—Ä–∏—Ç–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
1. **–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –ø–ª–∞–≥–∏–Ω–æ–≤ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
2. **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
4. **–¢–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** —É—Ç–∏–ª–∏—Ç
5. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É—Ç–∏–ª–∏—Ç** –≤ –ø–æ—Ä—è–¥–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
6. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤** (–≤ –ª—é–±–æ–º –ø–æ—Ä—è–¥–∫–µ)

### –ü—Ä–∏–º–µ—Ä –ø–æ—Ä—è–¥–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
```
1. logger (foundation, –Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
2. plugins_manager (foundation, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç logger)
3. settings_manager (foundation, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç logger)
4. tg_bot_api (telegram layer, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç logger, settings_manager)
5. tg_permission_manager (telegram layer, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç logger, tg_bot_api)
6. event_processor (core, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç logger, settings_manager, database_service)
7. chat_service (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç logger, database_service, event_processor)
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞** –ø–ª–∞–≥–∏–Ω–æ–≤
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å **—Å–≤—è–∑–∞–Ω–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã** –ø–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Å–ª–æ—è–º
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å **–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** –∏ **–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**
- –°–ª–µ–¥–æ–≤–∞—Ç—å **–ø—Ä–∏–Ω—Ü–∏–ø—É –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Ç–∏–ø–∏–∑–∞—Ü–∏—é** –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **Foundation —É—Ç–∏–ª–∏—Ç—ã** –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Python

### ‚ùå –ó–∞–ø—Ä–µ—â–µ–Ω–æ
- –°–æ–∑–¥–∞–≤–∞—Ç—å **—Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** - —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
- –°–æ–∑–¥–∞–≤–∞—Ç—å **–ø–ª–∞–≥–∏–Ω—ã –±–µ–∑ config.yaml** - –ø–ª–∞–≥–∏–Ω –Ω–µ –±—É–¥–µ—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω –∏ –Ω–µ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç
- –î–µ–ª–∞—Ç—å **—Å–µ—Ä–≤–∏—Å—ã –∑–∞–≤–∏—Å–∏–º—ã–º–∏ –æ—Ç —Å–µ—Ä–≤–∏—Å–æ–≤** - –Ω–∞—Ä—É—à–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- **Foundation —É—Ç–∏–ª–∏—Ç—ã** –Ω–µ –¥–æ–ª–∂–Ω—ã –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –¥—Ä—É–≥–∏—Ö —É—Ç–∏–ª–∏—Ç

### ‚ö†Ô∏è –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Å–ª–∏—à–∫–æ–º –≥–ª—É–±–æ–∫—É—é –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å** (>5 —É—Ä–æ–≤–Ω–µ–π)
- –î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å **—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª** –≤ —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–∞—Ö
- **Custom layer —É—Ç–∏–ª–∏—Ç—ã** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã –∏–∑ –¥—Ä—É–≥–∏—Ö custom-—Å–ª–æ–µ–≤ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## –û—Ç–ª–∞–¥–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```python
# –ö–†–ò–¢–ò–ß–ù–û: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
if not plugins_manager.check_circular_dependencies():
    print("‚ùå –û–ë–ù–ê–†–£–ñ–ï–ù–´ –¶–ò–ö–õ–ò–ß–ï–°–ö–ò–ï –ó–ê–í–ò–°–ò–ú–û–°–¢–ò!")
    print("–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.")

# –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
order = plugins_manager.get_dependency_order()
print("–ü–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:", order)

# –ü–æ–ª—É—á–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞
deps = plugins_manager.get_plugin_dependencies("my_plugin")
print("–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:", deps)

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ config.yaml —É –≤—Å–µ—Ö –ø–ª–∞–≥–∏–Ω–æ–≤
missing_configs = plugins_manager.find_plugins_without_config()
if missing_configs:
    print("‚ùå –ü–õ–ê–ì–ò–ù–´ –ë–ï–ó config.yaml:", missing_configs)
    print("–≠—Ç–∏ –ø–ª–∞–≥–∏–Ω—ã –Ω–µ –±—É–¥—É—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã —Å–∏—Å—Ç–µ–º–æ–π!")

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Foundation —É—Ç–∏–ª–∏—Ç—ã –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
foundation_issues = plugins_manager.check_foundation_utilities()
if foundation_issues:
    print("‚ùå FOUNDATION –£–¢–ò–õ–ò–¢–´ –ò–°–ü–û–õ–¨–ó–£–Æ–¢ –î–†–£–ì–ò–ï –£–¢–ò–õ–ò–¢–´:", foundation_issues)
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–ª–∞–≥–∏–Ω–∞–º–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:
- –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–æ–≤
- –û—à–∏–±–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ü–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ Foundation —É—Ç–∏–ª–∏—Ç

## –ú–∏–≥—Ä–∞—Ü–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞
1. –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (foundation/core/database/level_N/services)
2. –î–æ–±–∞–≤–∏—Ç—å `config.yaml` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–¥ –ø–ª–∞–≥–∏–Ω–∞
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
1. –û–±–Ω–æ–≤–∏—Ç—å `config.yaml`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
3. –£–±–µ–¥–∏—Ç—å—Å—è –≤ —Å–æ–±–ª—é–¥–µ–Ω–∏–∏ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –£–¥–∞–ª–µ–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞
1. –£–¥–∞–ª–∏—Ç—å –ø–∞–ø–∫—É –ø–ª–∞–≥–∏–Ω–∞
2. –£–±—Ä–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ –¥—Ä—É–≥–∏—Ö –ø–ª–∞–≥–∏–Ω–æ–≤
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ