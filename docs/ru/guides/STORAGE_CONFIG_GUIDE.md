---
title: –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ö—Ä–∞–Ω–∏–ª–∏—â—É –∞—Ç—Ä–∏–±—É—Ç–æ–≤
description: –†–∞–±–æ—Ç–∞ —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –∞—Ç—Ä–∏–±—É—Ç–æ–≤ (Storage) –≤ Coreness. Tenant Storage, User Storage, —Ç–∏–ø—ã –∑–Ω–∞—á–µ–Ω–∏–π –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö.
keywords: storage coreness, key-value —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, tenant storage, user storage, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–Ω–∞–Ω—Ç–∞
---

# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Storage (—Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö)

> **üìñ –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ** –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Ö—Ä–∞–Ω–∏–ª–∏—â –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≥–∏–±–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏, –ª–∏–º–∏—Ç–∞–º–∏, —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

**Storage** ‚Äî —ç—Ç–æ –≥–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–µ key-value, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –•—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–Ω–∞–Ω—Ç–∞ (–ª–∏–º–∏—Ç—ã, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
- –£–ø—Ä–∞–≤–ª—è—Ç—å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ —Ç–µ–Ω–∞–Ω—Ç–∞
- –•—Ä–∞–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ì–∏–±–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã –ë–î
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –ë–î

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å ‚Äî –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –±–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î
- ‚úÖ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è ‚Äî –¥–∞–Ω–Ω—ã–µ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ –ª–æ–≥–∏—á–µ—Å–∫–∏–º —Ñ–∞–π–ª–∞–º (Tenant Storage) –∏–ª–∏ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º (User Storage)
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ ‚Äî –ø—Ä–æ—Å—Ç—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö (—Å—Ç—Ä–æ–∫–∏, —á–∏—Å–ª–∞, bool, –º–∞—Å—Å–∏–≤—ã, –æ–±—ä–µ–∫—Ç—ã)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏
- ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö ‚Äî –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —Ç–µ–Ω–∞–Ω—Ç–∞–º

## üîÄ –¢–∏–ø—ã —Ö—Ä–∞–Ω–∏–ª–∏—â

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ç–∏–ø–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â:

### Tenant Storage
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π —Ç–µ–Ω–∞–Ω—Ç–∞
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ `group_key` (settings, limits, features –∏ —Ç.–¥.)
- **–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:** YAML —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ `storage/` –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ç–µ–Ω–∞–Ω—Ç–∞
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –ë–î
- **–ö–ª—é—á:** `(tenant_id, group_key, key)`

### User Storage
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** –ü–ª–æ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–µ–∑ –≥—Ä—É–ø–ø (`{key: value}`)
- **–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:** –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ —á–µ—Ä–µ–∑ –¥–µ–π—Å—Ç–≤–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:** –ù–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π, —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –¥–µ–π—Å—Ç–≤–∏—è
- **–ö–ª—é—á:** `(tenant_id, user_id, key)`

**–†–∞–∑–ª–∏—á–∏—è:**

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Tenant Storage | User Storage |
|----------------|----------------|--------------|
| –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ | –ü–æ `group_key` | –ë–µ–∑ –≥—Ä—É–ø–ø |
| –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö | YAML —Ñ–∞–π–ª—ã | –î–µ–π—Å—Ç–≤–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ |
| –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ | –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
| –û–±–ª–∞—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–Ω–∞–Ω—Ç–∞ | –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ | `{group_key: {key: value}}` | `{key: value}` |

## üè¢ Tenant Storage

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

#### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ

Tenant Storage –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ `storage/` –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ç–µ–Ω–∞–Ω—Ç–∞:

```
tenant_101/
‚îú‚îÄ‚îÄ bots/
‚îÇ   ‚îî‚îÄ‚îÄ telegram.yaml
‚îú‚îÄ‚îÄ storage/               # –ü–∞–ø–∫–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
‚îÇ   ‚îú‚îÄ‚îÄ settings.yaml     # –ì—Ä—É–ø–ø–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îÇ   ‚îú‚îÄ‚îÄ limits.yaml       # –ì—Ä—É–ø–ø–∞ –ª–∏–º–∏—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ features.yaml      # –ì—Ä—É–ø–ø–∞ —Ñ—É–Ω–∫—Ü–∏–π
‚îî‚îÄ‚îÄ scenarios/
    ‚îî‚îÄ‚îÄ ...
```

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

–ö–∞–∂–¥—ã–π —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ `storage/` —Å–æ–¥–µ—Ä–∂–∏—Ç –≥—Ä—É–ø–ø—ã –∞—Ç—Ä–∏–±—É—Ç–æ–≤. –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–ø–æ—Å–æ–± –ª–æ–≥–∏—á–µ—Å–∫–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

**–ü—Ä–∏–º–µ—Ä:**
```yaml
# storage/config.yaml - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –Ω–µ –≤–∞–∂–Ω–æ
settings:
  max_users: 100
  max_storage: 500
  default_language: "ru"

limits:
  daily_requests: 1000
  max_file_size: 10485760
```

–í—Å–µ —Ñ–∞–π–ª—ã –∏–∑ –ø–∞–ø–∫–∏ `storage/` –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

#### –ú–µ—Ö–∞–Ω–∏–∑–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

–ü—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Tenant Storage —Å–∏—Å—Ç–µ–º–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –≥—Ä—É–ø–ø –∏–∑ –ë–î** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –≥—Ä—É–ø–ø –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏** ‚Äî —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è –≥—Ä—É–ø–ø—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –≥—Ä—É–ø–ø–∞–º–∏ –≤ –ë–î
3. **–£–¥–∞–ª–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º—ã—Ö –≥—Ä—É–ø–ø** ‚Äî —É–¥–∞–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ –≥—Ä—É–ø–ø—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
4. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞** ‚Äî –≤—Å–µ –≥—Ä—É–ø–ø—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

#### –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ì—Ä—É–ø–ø—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è (—É–¥–∞–ª—è—é—Ç—Å—è —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ, –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ)
- **–ì—Ä—É–ø–ø—ã, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ –∫–æ–Ω—Ñ–∏–≥–µ** ‚Äî –æ—Å—Ç–∞—é—Ç—Å—è –Ω–µ—Ç—Ä–æ–Ω—É—Ç—ã–º–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (–Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- **–ù–æ–≤—ã–µ –≥—Ä—É–ø–ø—ã** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **–ü–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ñ–∏–≥—É** ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≥—Ä—É–ø–ø—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä:**

–ï—Å–ª–∏ –≤ –ë–î –µ—Å—Ç—å –≥—Ä—É–ø–ø—ã: `settings`, `limits`, `features`, `old_group`

–ò –≤ –∫–æ–Ω—Ñ–∏–≥–µ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ: `settings`, `limits`, `features`

–¢–æ –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:
- ‚úÖ `settings`, `limits`, `features` ‚Äî –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–∞–Ω–æ–≤–æ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
- ‚úÖ `old_group` ‚Äî –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –Ω–µ—Ç—Ä–æ–Ω—É—Ç–æ–π –≤ –ë–î (–Ω–µ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞)

**–î–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≥—Ä—É–ø–ø—ã –∏–∑ –ë–î** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ `delete_storage` –≤ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏–ª–∏ —É–¥–∞–ª–∏—Ç–µ –≤—Å–µ –∑–∞–ø–∏—Å–∏ –≥—Ä—É–ø–ø—ã –≤—Ä—É—á–Ω—É—é.

### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤

#### –ü—Ä–∏–Ω—Ü–∏–ø—ã –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

1. **–§–∞–π–ª—ã –¥–ª—è –ª–æ–≥–∏—á–µ—Å–∫–æ–π –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏** ‚Äî –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. **–û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤** ‚Äî –≤—Å–µ —Ñ–∞–π–ª—ã –∏–∑ –ø–∞–ø–∫–∏ `storage/` –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
3. **–ì—Ä—É–ø–ø—ã –∞—Ç—Ä–∏–±—É—Ç–æ–≤** ‚Äî –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `{group_key: {key: value}}` –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤
4. **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∫–ª—é—á–µ–π** ‚Äî –∫–ª—é—á–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –≤ —Ä–∞–º–∫–∞—Ö –≥—Ä—É–ø–ø—ã (`group_key`)

#### –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```
storage/
‚îú‚îÄ‚îÄ config.yaml          # –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
‚îÇ   settings:
‚îÇ     max_users: 100
‚îÇ     default_language: "ru"
‚îÇ   limits:
‚îÇ     daily_requests: 1000
‚îÇ     max_file_size: 10485760
‚îÇ
‚îî‚îÄ‚îÄ additional.yaml     # –ï—â–µ –æ–¥–∏–Ω —Ñ–∞–π–ª –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
    features:
      enable_premium: true
      enable_api: false
```

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–§–∞–π–ª: `storage/config.yaml`** (–Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º)

```yaml
# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
settings:
  max_users: 100                          # –¶–µ–ª–æ–µ —á–∏—Å–ª–æ
  max_storage: 500                        # –¶–µ–ª–æ–µ —á–∏—Å–ª–æ
  default_language: "ru"                  # –°—Ç—Ä–æ–∫–∞
  allowed_languages: ["ru", "en", "de"]   # –ú–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫
  enable_notifications: true              # –ë—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ
  maintenance_mode: false                 # –ë—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ

# –õ–∏–º–∏—Ç—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
limits:
  daily_requests: 1000                     # –¶–µ–ª–æ–µ —á–∏—Å–ª–æ
  max_file_size: 10485760                # –¶–µ–ª–æ–µ —á–∏—Å–ª–æ (10 MB –≤ –±–∞–π—Ç–∞—Ö)
  rate_limit_per_minute: 30              # –¶–µ–ª–æ–µ —á–∏—Å–ª–æ
  discount_percentage: 10.5               # –î—Ä–æ–±–Ω–æ–µ —á–∏—Å–ª–æ
  price_tiers: [9.99, 19.99, 29.99]      # –ú–∞—Å—Å–∏–≤ –¥—Ä–æ–±–Ω—ã—Ö —á–∏—Å–µ–ª

# –§—É–Ω–∫—Ü–∏–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
features:
  enable_premium: true                    # –ë—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ
  enable_api: false                       # –ë—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ
  enable_webhooks: false                 # –ë—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ
  supported_regions: ["eu", "us", "asia"] # –ú–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫

# –¢–∞—Ä–∏—Ñ—ã –∏ —Ü–µ–Ω—ã
pricing:
  base_price: 9.99                        # –î—Ä–æ–±–Ω–æ–µ —á–∏—Å–ª–æ
  premium_price: 29.99                    # –î—Ä–æ–±–Ω–æ–µ —á–∏—Å–ª–æ
  trial_days: 14                          # –¶–µ–ª–æ–µ —á–∏—Å–ª–æ
```

## üë§ User Storage

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

**User Storage** ‚Äî —ç—Ç–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –•—Ä–∞–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
- –£–ø—Ä–∞–≤–ª—è—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ç–µ–Ω–∞–Ω—Ç–∞–º

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

User Storage –∏–º–µ–µ—Ç –ø–ª–æ—Å–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–µ–∑ –≥—Ä—É–ø–ø:

```
{key: value}
```

**–ü—Ä–∏–º–µ—Ä:**
```yaml
language: "ru"
theme: "dark"
messages_sent: 150
favorite_colors: ["red", "blue", "green"]
user_preferences:
  language: "ru"
  theme: "dark"
  notifications: true
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ò–∑–æ–ª—è—Ü–∏—è –ø–æ —Ç–µ–Ω–∞–Ω—Ç–∞–º:** –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ `tenant_id` –∏ `user_id`
- **–ü–ª–æ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** –ù–µ—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ `group_key`, —Ç–æ–ª—å–∫–æ `key: value`
- **–ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–∞–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∏ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –¥–µ–π—Å—Ç–≤–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç:** `tenant_id` –∏ `user_id` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–æ–±—ã—Ç–∏—è

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π —á–µ—Ä–µ–∑ —Å—Ü–µ–Ω–∞—Ä–∏–π:**

```yaml
set_user_preferences:
  description: "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
  
  trigger:
    - event_type: "callback"
      callback_data: "set_preferences"
  
  step:
    - action: "set_user_storage"
      params:
        key: "language"
        value: "ru"
    
    - action: "set_user_storage"
      params:
        key: "theme"
        value: "dark"
    
    - action: "set_user_storage"
      params:
        key: "user_preferences"
        value:
          language: "ru"
          theme: "dark"
          notifications: true
    
    - action: "send_message"
      params:
        text: "‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!"
```

**–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π:**

```yaml
show_user_preferences:
  description: "–ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
  
  trigger:
    - event_type: "callback"
      callback_data: "show_preferences"
  
  step:
    # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
    - action: "get_user_storage"
    
    - action: "send_message"
      params:
        text: |
          üë§ <b>–í–∞—à–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</b>
          
          –Ø–∑—ã–∫: <code>{_cache.user_storage_values.language|fallback:–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω}</code>
          –¢–µ–º–∞: <code>{_cache.user_storage_values.theme|fallback:–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞}</code>
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ (`key` —É–∫–∞–∑–∞–Ω) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—Ä—è–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –¥–æ—Å—Ç—É–ø–Ω–æ–µ —á–µ—Ä–µ–∑ `{_cache.user_storage_values}`. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –≤—Å–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π (–±–µ–∑ `key`) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `{key: value}`, –¥–æ—Å—Ç—É–ø–Ω–∞—è —á–µ—Ä–µ–∑ `{_cache.user_storage_values.key}`

## üî¢ –¢–∏–ø—ã –∑–Ω–∞—á–µ–Ω–∏–π

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã

–í –æ–±–æ–∏—Ö —Ç–∏–ø–∞—Ö Storage –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:

- ‚úÖ **–°—Ç—Ä–æ–∫–∏** ‚Äî —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ **–¶–µ–ª—ã–µ —á–∏—Å–ª–∞** ‚Äî —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞
- ‚úÖ **–î—Ä–æ–±–Ω—ã–µ —á–∏—Å–ª–∞** ‚Äî —á–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π
- ‚úÖ **–ë—É–ª–µ–≤—ã –∑–Ω–∞—á–µ–Ω–∏—è** ‚Äî true/false
- ‚úÖ **–ú–∞—Å—Å–∏–≤—ã** ‚Äî —Å–ø–∏—Å–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–π (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø—Ä–æ—Å—Ç—ã–µ —Ç–∏–ø—ã –∏ —Å–ª–æ–∂–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
- ‚úÖ **JSON –æ–±—ä–µ–∫—Ç—ã (—Å–ª–æ–≤–∞—Ä–∏)** ‚Äî –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–í–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã** ‚Äî –º–∞—Å—Å–∏–≤—ã —Å–ª–æ–≤–∞—Ä–µ–π, —Å–ª–æ–≤–∞—Ä–∏ —Å –º–∞—Å—Å–∏–≤–∞–º–∏, –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞—Ä–∏

### –ö–∞–∫ —É–∫–∞–∑—ã–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è

–í YAML —Ñ–∞–π–ª–∞—Ö (–¥–ª—è Tenant Storage) –∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–Ω–∞—á–µ–Ω–∏–π (–¥–ª—è User Storage) –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∏—Ö –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º –≤–∏–¥–µ ‚Äî —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —Ç–∏–ø:

```yaml
settings:
  max_users: 100                    # –¶–µ–ª–æ–µ —á–∏—Å–ª–æ
  price: 9.99                       # –î—Ä–æ–±–Ω–æ–µ —á–∏—Å–ª–æ
  enable_feature: true              # –ë—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ
  default_language: "ru"            # –°—Ç—Ä–æ–∫–∞
  allowed_languages: ["ru", "en", "de"]  # –ú–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫
  price_tiers: [9.99, 19.99, 29.99]      # –ú–∞—Å—Å–∏–≤ —á–∏—Å–µ–ª
  
  # JSON –æ–±—ä–µ–∫—Ç—ã (—Å–ª–æ–≤–∞—Ä–∏)
  admin_config:
    id: 1133574222
    name: "Admin"
    role: "admin"
    permissions: ["read", "write"]
  
  # –ú–∞—Å—Å–∏–≤—ã —Å–ª–æ–≤–∞—Ä–µ–π (–º–∞—Å—Å–∏–≤—ã —Å—Ç—Ä—É–∫—Ç—É—Ä)
  users:
    - id: 1
      name: "User 1"
      role: "user"
    - id: 2
      name: "User 2"
      role: "admin"
  
  # –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
  nested_data:
    level1:
      level2:
        value: "deep nested"
        items: [1, 2, 3]
```

**–ë—É–ª–µ–≤—ã –∑–Ω–∞—á–µ–Ω–∏—è:**
- `true`, `false` (–±—É–ª–µ–≤—ã –∑–Ω–∞—á–µ–Ω–∏—è –≤ YAML)
- `"true"`, `"false"` (—Å—Ç—Ä–æ–∫–∏ - –±—É–¥—É—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω—ã –≤ –±—É–ª–µ–≤—ã –∑–Ω–∞—á–µ–Ω–∏—è)

**–ú–∞—Å—Å–∏–≤—ã:**
- –ú–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–µ —Ç–∏–ø—ã: —Å—Ç—Ä–æ–∫–∏, —á–∏—Å–ª–∞, float, bool
- –ú–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã: —Å–ª–æ–≤–∞—Ä–∏, –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã
- –≠–ª–µ–º–µ–Ω—Ç—ã –º–∞—Å—Å–∏–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø—ã –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏
- –î–æ—Å—Ç—É–ø –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã: `{_cache.storage_values.settings.allowed_languages[0]}`

**–°–ª–æ–≤–∞—Ä–∏ (JSON –æ–±—ä–µ–∫—Ç—ã):**
- –ú–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ª—é–±—ã–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –∑–Ω–∞—á–µ–Ω–∏–π
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –¥–æ 10 —É—Ä–æ–≤–Ω–µ–π –≥–ª—É–±–∏–Ω—ã
- –î–æ—Å—Ç—É–ø –∫ –ø–æ–ª—è–º —á–µ—Ä–µ–∑ —Ç–æ—á–µ—á–Ω—É—é –Ω–æ—Ç–∞—Ü–∏—é: `{_cache.storage_values.settings.admin_config.name}`
- –ö–æ–º–±–∏–Ω–∞—Ü–∏—è —Å –º–∞—Å—Å–∏–≤–∞–º–∏: `{_cache.storage_values.settings.users[0].name}`

## üé¨ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

#### Tenant Storage

–í —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Tenant Storage:

- `get_storage` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è storage —Ç–µ–Ω–∞–Ω—Ç–∞ (–æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –≥—Ä—É–ø–ø—É –∏–ª–∏ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è). –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `group_key`, `key`, `group_key_pattern`, `key_pattern` –¥–ª—è –≥–∏–±–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
- `get_storage_groups` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π –≥—Ä—É–ø–ø –¥–ª—è —Ç–µ–Ω–∞–Ω—Ç–∞
- `set_storage` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤ storage —Ç–µ–Ω–∞–Ω—Ç–∞. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–º–µ—à–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥: –ø–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —á–µ—Ä–µ–∑ `values` –∏–ª–∏ —á–∞—Å—Ç–∏—á–Ω–∞—è —á–µ—Ä–µ–∑ `group_key`/`key`/`value`
- `delete_storage` ‚Äî —É–¥–∞–ª–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –∏–ª–∏ –≥—Ä—É–ø–ø—ã –∏–∑ storage —Ç–µ–Ω–∞–Ω—Ç–∞. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –≥—Ä—É–ø–ø—ã –∏–ª–∏ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º

#### User Storage

–í —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å User Storage:

- `get_user_storage` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è storage –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è). –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `key` –∏ `key_pattern` –¥–ª—è –≥–∏–±–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
- `set_user_storage` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤ storage –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–º–µ—à–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥: –ø–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —á–µ—Ä–µ–∑ `values` –∏–ª–∏ —á–∞—Å—Ç–∏—á–Ω–∞—è —á–µ—Ä–µ–∑ `key`/`value`
- `delete_user_storage` ‚Äî —É–¥–∞–ª–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ storage –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –≤—Å–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏–ª–∏ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É

**–í–∞–∂–Ω–æ:** 
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã `tenant_id` –∏ `user_id` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–æ–±—ã—Ç–∏—è –∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è –≤ —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö
- –î–∞–Ω–Ω—ã–µ –∏–∑ `response_data` –¥–µ–π—Å—Ç–≤–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `_cache` (–ø–ª–æ—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º —á–µ—Ä–µ–∑ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã: `{_cache.storage_values}` –¥–ª—è Tenant Storage –∏ `{_cache.user_storage_values}` –¥–ª—è User Storage
- –î–ª—è Tenant Storage –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Ç–æ–ª—å–∫–æ –≥—Ä—É–ø–ø—ã (`group_key` —É–∫–∞–∑–∞–Ω, `key` –Ω–µ —É–∫–∞–∑–∞–Ω): –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥—Ä—É–ø–ø—ã `{key: value}` (–±–µ–∑ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ group_key), –¥–æ—Å—Ç—É–ø–Ω–∞—è —á–µ—Ä–µ–∑ `{_cache.storage_values.{key}}`
- –î–ª—è Tenant Storage –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ (`group_key` –∏ `key` —É–∫–∞–∑–∞–Ω—ã): –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—Ä—è–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –¥–æ—Å—Ç—É–ø–Ω–æ–µ —á–µ—Ä–µ–∑ `{_cache.storage_values}`
- –î–ª—è Tenant Storage –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –≤—Å–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π (–Ω–∏—á–µ–≥–æ –Ω–µ —É–∫–∞–∑–∞–Ω–æ): –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `{group_key: {key: value}}`, –¥–æ—Å—Ç—É–ø–Ω–∞—è —á–µ—Ä–µ–∑ `{_cache.storage_values.{group_key}.{key}}`
- –î–ª—è User Storage –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –≤—Å–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π: `{_cache.user_storage_values.{key}}`
- –î–ª—è User Storage –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞: `{_cache.user_storage_values}` (–ø—Ä—è–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è

**–ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è:**

```yaml
show_settings:
  description: "–ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–Ω–∞–Ω—Ç–∞"
  
  trigger:
    - event_type: "message"
      event_text: "/settings"
  
  step:
    # –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ storage
    - action: "get_storage"
      params:
        group_key: "settings"
        key: "max_users"
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏
    - action: "send_message"
      params:
        text: |
          üìä <b>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</b>
          
          –ú–∞–∫—Å–∏–º—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: <code>{_cache.storage_values}</code>
```

**–î–æ—Å—Ç—É–ø –∫ –∑–Ω–∞—á–µ–Ω–∏—é:**
- –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ (`group_key` –∏ `key` —É–∫–∞–∑–∞–Ω—ã) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—Ä—è–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–ø—Ä–∏–º–∏—Ç–∏–≤ –∏–ª–∏ –æ–±—ä–µ–∫—Ç –∫–∞–∫ –µ—Å—Ç—å), –¥–æ—Å—Ç—É–ø–Ω–æ–µ —á–µ—Ä–µ–∑ `{_cache.storage_values}`
- –í –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ: `{_cache.storage_values}` –≤–µ—Ä–Ω–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `100` (–∏–ª–∏ –¥—Ä—É–≥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `max_users`)
- –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Ç–æ–ª—å–∫–æ –≥—Ä—É–ø–ø—ã (`group_key` —É–∫–∞–∑–∞–Ω, `key` –Ω–µ —É–∫–∞–∑–∞–Ω) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥—Ä—É–ø–ø—ã `{key: value}`, –¥–æ—Å—Ç—É–ø–Ω–∞—è —á–µ—Ä–µ–∑ `{_cache.storage_values.{key}}`

### –ü—Ä–∏–º–µ—Ä 2: –ü–æ–ª—É—á–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã –∑–Ω–∞—á–µ–Ω–∏–π

**–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≥—Ä—É–ø–ø—ã –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º:**

```yaml
show_all_settings:
  description: "–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
  
  trigger:
    - event_type: "callback"
      callback_data: "show_settings"
  
  step:
    # –ü–æ–ª—É—á–∞–µ–º –≤—Å—é –≥—Ä—É–ø–ø—É settings –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
    - action: "get_storage"
      params:
        group_key: "settings"
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –≥—Ä—É–ø–ø—ã
    - action: "send_message"
      params:
        text: |
          ‚öôÔ∏è <b>–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</b>
          
          –ú–∞–∫—Å–∏–º—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: <code>{_cache.storage_values.max_users}</code>
          –ú–∞–∫—Å–∏–º—É–º —Ö—Ä–∞–Ω–∏–ª–∏—â–∞: <code>{_cache.storage_values.max_storage}</code>
          –Ø–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: <code>{_cache.storage_values.default_language}</code>
          
          –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: {_cache.storage_values.enable_notifications|true|value:‚úÖ|fallback:‚ùå}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –≤–º–µ—Å—Ç–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –≥—Ä—É–ø–ø—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å—Ä–∞–∑—É
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥—Ä—É–ø–ø—ã —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Ç–æ–ª—å–∫–æ `group_key` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥—Ä—É–ø–ø—ã `{key: value}` (–±–µ–∑ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ group_key), –¥–æ—Å—Ç—É–ø–Ω–∞—è —á–µ—Ä–µ–∑ `{_cache.storage_values.{key}}`

### –ü—Ä–∏–º–µ—Ä 3: –†–∞–±–æ—Ç–∞ —Å User Storage

**–ü–æ–ª—É—á–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö:**

```yaml
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
set_user_settings:
  description: "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
  
  trigger:
    - event_type: "callback"
      callback_data: "set_settings"
  
  step:
    - action: "set_user_storage"
      params:
        key: "language"
        value: "ru"
    
    - action: "set_user_storage"
      params:
        key: "theme"
        value: "dark"
    
    - action: "set_user_storage"
      params:
        key: "messages_sent"
        value: 0
    
    - action: "send_message"
      params:
        text: "‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!"

# –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
show_user_data:
  description: "–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
  
  trigger:
    - event_type: "callback"
      callback_data: "show_data"
  
  step:
    - action: "get_user_storage"
    
    - action: "send_message"
      params:
        text: |
          üë§ <b>–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</b>
          
          –Ø–∑—ã–∫: <code>{_cache.user_storage_values.language|fallback:–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω}</code>
          –¢–µ–º–∞: <code>{_cache.user_storage_values.theme|fallback:–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞}</code>
          –°–æ–æ–±—â–µ–Ω–∏–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: <code>{_cache.user_storage_values.messages_sent|fallback:0}</code>

# –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
delete_user_data:
  description: "–£–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
  
  trigger:
    - event_type: "callback"
      callback_data: "delete_data"
  
  step:
    - action: "delete_user_storage"
      params:
        key: "language"
    
    - action: "send_message"
      params:
        text: "üóëÔ∏è –î–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã!"
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ User Storage:**
- `tenant_id` –∏ `user_id` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–æ–±—ã—Ç–∏—è
- –î–∞–Ω–Ω—ã–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —Ç–µ–Ω–∞–Ω—Ç–∞–º –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- –ù–µ—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ ‚Äî –ø–ª–æ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `{key: value}`
- –î–∞–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –¥–µ–π—Å—Ç–≤–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

---

### –ü—Ä–∏–º–µ—Ä 4: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ YAML

**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —á–∏—Ç–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ YAML:**

```yaml
show_formatted_storage:
  description: "–ü–æ–∫–∞–∑–∞—Ç—å storage –≤ —Ñ–æ—Ä–º–∞—Ç–µ YAML"
  
  trigger:
    - event_type: "callback"
      callback_data: "show_formatted"
  
  step:
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
    - action: "get_storage"
      params:
        group_key: "settings"
        format: true
    
    - action: "send_message"
      params:
        text: |
          ‚öôÔ∏è <b>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ (YAML —Ñ–æ—Ä–º–∞—Ç)</b>
          
          <pre>{_cache.formatted_text}</pre>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä `format`:**
- –î–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (`get_storage`, `get_user_storage`)
- –ü—Ä–∏ `format: true` –≤ `response_data` –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–µ `formatted_text` —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YAML
- –î–æ—Å—Ç—É–ø –∫ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É —Ç–µ–∫—Å—Ç—É —á–µ—Ä–µ–∑ `{_cache.formatted_text}`
- –£–¥–æ–±–Ω–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
