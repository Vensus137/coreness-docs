---
title: Руководство по развертыванию
description: Полное руководство по установке и развертыванию Coreness. Docker, PostgreSQL, webhook настройка и обновление сервера.
keywords: развертывание coreness, docker deployment, postgresql setup, webhook configuration
---

# Развёртывание

Краткий гайд по развёртыванию платформы с нуля.

## С чего начать

1. **Скачайте репозиторий:**
   - Через Git: `git clone <URL_репозитория>` и перейдите в каталог проекта (`cd <имя_репозитория>`).
   - Или скачайте архив с GitHub (Code → Download ZIP), распакуйте и откройте каталог в терминале.
2. После клона проект по умолчанию готов к запуску **с настройками по умолчанию (SQLite)**. Для корректной настройки окружения, БД и дальнейших обновлений рекомендуется использовать утилиту **Core Manager**.

## Запуск Core Manager

```bash
python tools/core_manager/core_manager.py
```

При первом запуске утилита запросит:

1. **Окружение** (test / prod)
   - `test` — тестовое окружение (отдельные порты и контейнеры, например postgres-test, порт 5433).
   - `prod` — продакшн (postgres, порт 5432).

2. **Режим развёртывания** (docker / native)
   - `docker` — контейнеры (Docker + docker-compose): утилита поднимает и обновляет контейнеры, конфигурация в `~/.coreness`, команда `dc` из `docker/compose`.
   - `native` — без контейнеров: подключение к БД по настройкам (например localhost), после обновления — установка зависимостей из корневого `requirements.txt`. Удобно для локальной разработки и Windows.

3. **Язык интерфейса** (English / Русский). Его можно сменить в любой момент через пункт 4 меню.

Настройки сохраняются в `config/.version`.

**Платформа:** на Windows рекомендуется режим **native** — с docker compose под Windows бывают проблемы, утилита под это не заточена; нативно всё работает нормально. На Linux и сервере можно использовать **docker**.

## Меню утилиты

```
==================================================
                   CORE MANAGER
==================================================

  Версия: 1.1.0-beta2-10
  Окружение: test
  Режим развёртывания: docker

--------------------------------------------------

1. Обновление системы
2. Работа с БД
3. Обновить утилиту
4. Сменить язык
0. Выход

--------------------------------------------------
Выберите действие:
```

- **1. Обновление системы** — обновление платформы из репозитория (выбор версии, бэкап, обновление файлов, миграция БД, перезапуск контейнеров при docker).
- **2. Работа с БД** — миграции, создание бэкапа, восстановление из бэкапа.
- **3. Обновить утилиту** — самообновление Core Manager.
- **4. Сменить язык** — переключение языка интерфейса.

## Основные операции

### Обновление системы

Обновление из GitHub: выбор версии → бэкап → обновление файлов → предложение миграции БД → перезапуск контейнеров (docker) или установка зависимостей из `requirements.txt` (native). **Файлы настроек и версии** (`config/settings.yaml`, `config/.version`) **не перезаписываются**, чтобы не сбрасывать ваши настройки.

### Работа с БД

- **Миграции** — приведение схемы БД к моделям (SQLite и PostgreSQL).
- **Бэкап** — SQLite: копирование файла; PostgreSQL: через pg_dump в контейнере или локальный клиент.
- **Восстановление** — из выбранного бэкапа.

### Самообновление утилиты

Пункт 3 в меню: загрузка новой версии Core Manager с GitHub, обновление файлов утилиты и перезапуск.

## Конфигурация

Основной конфиг: `tools/core_manager/config.yaml`.

Важные секции:
- `version_file.path` — путь к файлу версии (`config/.version`)
- `system_update` — URL репозитория, ветка, список файлов для обновления
- `docker_compose.global_config_dir` — каталог конфигурации Docker (`~/.coreness`)
- `database.backup_dir` — каталог бэкапов БД (`data/backups`)

Файл версии `config/.version` хранит: `version`, `language`, `environment`, `deployment_mode`.

## Поддержка

При вопросах или проблемах: изучите этот гайд и вывод утилиты; при необходимости обратитесь к разработчику или создайте issue в репозитории проекта.
